(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{hGdz:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),a=n("rhD1"),o=n("3Pt+"),c=n("tyNb"),r=n("0IaG"),s=n("FtGj"),l=n("dNgK"),b=n("fXoL"),d=n("lJxs"),m=n("dMDw"),g=n("AytR"),p=n("tk/3"),u=n("qXBG");const h=g.a.apiUrl+"/users",f=g.a.apiUrl+"/projects";let C=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getProjects(t,e,n){var i=`?pagesize=${t}&page=${e}`;return n&&(i+=`&search=${n}`),this.http.get(f+"/getprojects"+i)}addProject(t,e){const n={project_name:t.project_name,project_desc:t.project_desc,assignedUsers:t.assignedUsers,userId:this.authService.getUserId()};return this.http.post(f+"/create",n)}getProjectById(t){return this.http.get(f+"/"+t)}updateProject(t,e){return this.http.put(f+"/"+t._id,{id:t._id,project_name:t.project_name,project_desc:e.project_desc,assignedUsers:e.assignedUsers})}deleteProject(t){return this.http.delete(f+"/"+t)}search(t){var e="?";return t&&(e+=`search=${t}`),this.http.get(h+"/search"+e).pipe(Object(m.debounceTime)(500),Object(d.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(b.Yb(p.b),b.Yb(c.b),b.Yb(u.a))},t.\u0275prov=b.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=n("kmnG"),k=n("qFsG"),T=n("/1cH"),v=n("bTqV"),U=n("NFeN"),I=n("A5z7"),P=n("FKr1");const O=["assigneeInput"],x=["auto"];function M(t,e){1&t&&(b.Ub(0,"h1",19),b.Ic(1,"Edit Project"),b.Tb())}function w(t,e){1&t&&(b.Ub(0,"h1",19),b.Ic(1,"Create Project"),b.Tb())}function y(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Please Enter Project Name."),b.Tb())}function j(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Please Enter Project Description."),b.Tb())}function S(t,e){1&t&&(b.Ub(0,"mat-icon",28),b.Ic(1,"cancel"),b.Tb())}function z(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-chip",26),b.cc("removed",(function(){b.zc(t);const n=e.$implicit;return b.gc(2).remove(n)})),b.Ic(1),b.Gc(2,S,2,0,"mat-icon",27),b.Tb()}if(2&t){const t=e.$implicit,n=b.gc(2);b.oc("selectable",n.selectable)("removable",n.removable),b.Cb(1),b.Lc(" ",t.first_name," ",t.last_name," "),b.Cb(1),b.oc("ngIf",n.removable)}}function F(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",20),b.Ub(1,"div",21),b.Ub(2,"mat-icon",22),b.Ic(3,"group"),b.Tb(),b.Ub(4,"mat-label"),b.Ic(5,"Assigned Users"),b.Tb(),b.Pb(6,"br"),b.Tb(),b.Ub(7,"div",21),b.Ub(8,"input",23),b.cc("ngModelChange",(function(e){return b.zc(t),b.gc().project.assignedUsers=e})),b.Tb(),b.Ub(9,"mat-chip-list",null,24),b.Gc(11,z,3,5,"mat-chip",25),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.gc();b.Cb(8),b.oc("ngModel",t.project.assignedUsers),b.Cb(3),b.oc("ngForOf",t.project.assignedUsers)}}function D(t,e){if(1&t&&(b.Ub(0,"mat-option",29,30),b.Ic(2),b.Tb()),2&t){const t=e.$implicit;b.oc("value",t),b.Cb(2),b.Lc(" ",t.first_name," ",t.last_name," ")}}let G=(()=>{class t{constructor(t,e,n,i,a,c,r){this.projectsService=t,this.dialogRef=e,this.route=n,this._snackBar=i,this.router=a,this.dialog=c,this.visible=!0,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[s.g,s.c],this.fruitCtrl=new o.d,this.isLoading=!0,this.project=[],this.data=[],this.horizontalPos="right",this.verticalPos="top",this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],console.log(r,"0000000"),this.data=r,this.project={_id:"",project_name:"",project_desc:"",assignedUsers:[]}}ngOnInit(){this.data.id&&"edit"==this.data.mode?this.projectsService.getProjectById(this.data.id).subscribe(t=>{this.isLoading=!1,this.isEdit=!0,this.mode="edit",console.log("ttt",t),this.project={_id:t.data[0]._id,project_name:t.data[0].project_name,project_desc:t.data[0].project_desc,assignedUsers:t.data[0].assignedUsers}}):(console.log("Create"),this.isLoading=!1,this.mode="create",this.isEdit=!1,this.userId=null)}onSave(t){t.invalid||(console.log(t.value),"create"===this.mode?this.projectsService.addProject(t.value,this.userId).subscribe(t=>{this.dialogRef.close()},t=>{console.log(t)}):this.projectsService.updateProject(this.project,t.value).subscribe(t=>{this.dialogRef.close()},t=>{console.log(t)}))}searchUsers(t){t&&this.projectsService.search(t).subscribe(t=>{this.searchUser=t.users})}displayFn(t){return t?t.first_name+" "+t.last_name:""}onSelection(t){const e=t.option.value;let n=this.project.assignedUsers.findIndex(t=>t._id===e._id);console.log(n,e),-1==n?(this.project.assignedUsers.push(t.option.value),this.assigneeInput.nativeElement.value="",this.fruitCtrl.setValue(null)):(this.sankBardata.message="User Allready Exist in this Project.",this.openSnakBar(),this.fruitCtrl.setValue(null))}selected(t){this.project.assignedUsers.push(t.option.viewValue),this.project.assignedUsers.nativeElement.value="",this.project.assignedUsers.setValue(null)}remove(t){const e=this.project.assignedUsers.indexOf(t);e>=0&&this.project.assignedUsers.splice(e,1)}close(){this.dialogRef.close()}openSnakBar(){let t=new l.b;t.verticalPosition=this.verticalPos,t.horizontalPosition=this.horizontalPos,t.duration=8e3,this._snackBar.open(this.sankBardata.message,"Ok",t)}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(C),b.Ob(r.h),b.Ob(c.a),b.Ob(l.a),b.Ob(c.b),b.Ob(r.b),b.Ob(r.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-create-project"]],viewQuery:function(t,e){var n;1&t&&(b.Nc(O,!0),b.Nc(x,!0)),2&t&&(b.vc(n=b.dc())&&(e.assigneeInput=n.first),b.vc(n=b.dc())&&(e.matAutocomplete=n.first))},decls:35,vars:14,consts:[["mat-dialog-title","",4,"ngIf"],[3,"submit"],["projectForm","ngForm"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","name","project_name","type","text","placeholder","Project Name","required","",3,"disabled","ngModel","ngModelChange"],["nameInput","ngModel"],[4,"ngIf"],["matInput","","name","project_desc","type","text","placeholder","Description","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["class","container",4,"ngIf"],["type","text","matInput","","placeholder","New User...",3,"matAutocomplete","formControl","keyup"],["assigneeInput","","assigneeInput",""],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-card-actions","","align","end"],["mat-raised-button","","color","primary","matDialogClose","",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-dialog-title",""],[1,"container"],[1,"row"],["md-list-icon",""],["type","hidden","name","assignedUsers",3,"ngModel","ngModelChange"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],["datae",""]],template:function(t,e){if(1&t){const t=b.Vb();b.Gc(0,M,2,0,"h1",0),b.Gc(1,w,2,0,"h1",0),b.Ub(2,"form",1,2),b.cc("submit",(function(){b.zc(t);const n=b.wc(3);return e.onSave(n)})),b.Ub(4,"div",3),b.Ub(5,"mat-form-field",4),b.Ub(6,"mat-label"),b.Ic(7,"Project Name"),b.Tb(),b.Ub(8,"input",5,6),b.cc("ngModelChange",(function(t){return e.project.project_name=t})),b.Tb(),b.Gc(10,y,2,0,"mat-error",7),b.Tb(),b.Ub(11,"mat-form-field",4),b.Ub(12,"mat-label"),b.Ic(13,"Description"),b.Tb(),b.Ub(14,"textarea",8,9),b.cc("ngModelChange",(function(t){return e.project.project_desc=t})),b.Ic(16),b.Tb(),b.Gc(17,j,2,0,"mat-error",7),b.Tb(),b.Gc(18,F,12,2,"div",10),b.Pb(19,"br"),b.Ub(20,"mat-form-field",4),b.Ub(21,"mat-label"),b.Ic(22,"Assign Users"),b.Tb(),b.Ub(23,"input",11,12),b.cc("keyup",(function(){b.zc(t);const n=b.wc(24);return e.searchUsers(n.value)})),b.Tb(),b.Ub(26,"mat-autocomplete",13,14),b.cc("optionSelected",(function(t){return e.onSelection(t)})),b.Gc(28,D,3,3,"mat-option",15),b.Tb(),b.Tb(),b.Tb(),b.Ub(29,"div",16),b.Ub(30,"button",17),b.cc("click",(function(){return e.close()})),b.Ic(31,"Close"),b.Tb(),b.Ic(32,"\xa0 "),b.Ub(33,"button",18),b.Ic(34,"Save"),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.wc(3),n=b.wc(9),i=b.wc(15),a=b.wc(27);b.oc("ngIf","edit"==e.mode),b.Cb(1),b.oc("ngIf","create"==e.mode),b.Cb(7),b.oc("disabled",e.isEdit)("ngModel",e.project.project_name),b.Cb(2),b.oc("ngIf",n.hasError("required")),b.Cb(4),b.oc("ngModel",e.project.project_desc),b.Cb(2),b.Jc(e.project.project_desc),b.Cb(1),b.oc("ngIf",i.hasError("required")),b.Cb(1),b.oc("ngIf",e.project.assignedUsers.length>0),b.Cb(5),b.oc("matAutocomplete",a)("formControl",e.fruitCtrl),b.Cb(3),b.oc("displayWith",e.displayFn),b.Cb(2),b.oc("ngForOf",e.searchUser),b.Cb(5),b.oc("disabled",t.invalid)}},directives:[i.l,o.v,o.n,o.o,r.f,_.b,_.f,k.b,o.b,o.t,o.m,o.p,T.c,o.e,T.a,i.k,v.b,r.d,r.i,_.a,U.a,I.b,I.a,I.c,P.n],styles:[".form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}.example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}.assign_btn[_ngcontent-%COMP%]{padding:0 28px;margin:11px}"]}),t})();function L(t,e){if(1&t&&(b.Ub(0,"mat-chip"),b.Ic(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Lc(" ",t.first_name," ",t.last_name," ")}}function A(t,e){if(1&t&&(b.Ub(0,"div",10),b.Ub(1,"div",11),b.Ub(2,"mat-icon",12),b.Ic(3,"group"),b.Tb(),b.Ub(4,"mat-label"),b.Ic(5,"Assigned Users"),b.Tb(),b.Pb(6,"br"),b.Tb(),b.Ub(7,"div",11),b.Ub(8,"mat-chip-list",null,13),b.Gc(10,L,2,2,"mat-chip",14),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.gc(2);b.Cb(10),b.oc("ngForOf",t.project.assignedUsers)}}function $(t,e){if(1&t&&(b.Ub(0,"mat-form-field",5),b.Ub(1,"mat-label"),b.Ic(2,"Created By"),b.Tb(),b.Pb(3,"input",6),b.Tb()),2&t){const t=b.gc(2);b.Cb(3),b.rc("value","",t.project.userId.first_name," ",t.project.userId.last_name,"")}}function B(t,e){if(1&t&&(b.Ub(0,"mat-form-field",5),b.Ub(1,"mat-label"),b.Ic(2,"Email"),b.Tb(),b.Pb(3,"input",6),b.Tb()),2&t){const t=b.gc(2);b.Cb(3),b.pc("value",t.project.userId.email)}}function E(t,e){if(1&t&&(b.Ub(0,"mat-form-field",5),b.Ub(1,"mat-label"),b.Ic(2,"updated By"),b.Tb(),b.Pb(3,"input",6),b.Tb()),2&t){const t=b.gc(2);b.Cb(3),b.rc("value","",t.project.updatedBy.first_name," ",t.project.userId.last_name,"")}}function R(t,e){if(1&t&&(b.Ub(0,"div",4),b.Ub(1,"mat-form-field",5),b.Ub(2,"mat-label"),b.Ic(3,"Project Name"),b.Tb(),b.Pb(4,"input",6),b.Tb(),b.Ub(5,"mat-form-field",5),b.Ub(6,"mat-label"),b.Ic(7,"Project Description"),b.Tb(),b.Ub(8,"textarea",7),b.Ic(9),b.Tb(),b.Tb(),b.Gc(10,A,11,1,"div",8),b.Pb(11,"br"),b.Gc(12,$,4,2,"mat-form-field",9),b.Gc(13,B,4,1,"mat-form-field",9),b.Gc(14,E,4,2,"mat-form-field",9),b.Ub(15,"mat-form-field",5),b.Ub(16,"mat-label"),b.Ic(17,"Created At"),b.Tb(),b.Pb(18,"input",6),b.hc(19,"date"),b.Tb(),b.Ub(20,"mat-form-field",5),b.Ub(21,"mat-label"),b.Ic(22,"Updated At"),b.Tb(),b.Pb(23,"input",6),b.hc(24,"date"),b.Tb(),b.Ub(25,"mat-form-field",5),b.Ub(26,"mat-label"),b.Ic(27,"Status"),b.Tb(),b.Pb(28,"input",6),b.Tb(),b.Tb()),2&t){const t=b.gc();b.Cb(4),b.pc("value",t.project.project_name),b.Cb(5),b.Jc(t.project.project_desc),b.Cb(1),b.oc("ngIf",t.project.assignedUsers.length>0),b.Cb(2),b.oc("ngIf",t.project.userId),b.Cb(1),b.oc("ngIf",t.project.userId),b.Cb(1),b.oc("ngIf",t.project.userId),b.Cb(4),b.pc("value",b.ic(19,9,t.project.createdAt)),b.Cb(5),b.pc("value",b.ic(24,11,t.project.updatedAt)),b.Cb(5),b.pc("value",t.project.status)}}let N=(()=>{class t{constructor(t,e,n,i,a,o){this.projectsService=t,this.route=e,this.dialogRef=n,this.router=i,this.dialog=a,this.isLoading=!0,this.project=[],this.data=[],this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.data=o}ngOnInit(){this.isLoading=!0,this.projectsService.getProjectById(this.data.id).subscribe(t=>{this.isLoading=!1,this.project=t.data[0]})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(C),b.Ob(c.a),b.Ob(r.h),b.Ob(c.b),b.Ob(r.b),b.Ob(r.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-project-info"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["class","font","mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","readonly","",3,"value"],["matInput","","type","text","readonly",""],["class","container",4,"ngIf"],["appearance","outline",4,"ngIf"],[1,"container"],[1,"row"],["md-list-icon",""],["chipList",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(b.Ub(0,"div"),b.Ub(1,"h2",0),b.Ic(2,"Project Info"),b.Tb(),b.Tb(),b.Gc(3,R,29,13,"div",1),b.Ub(4,"div",2),b.Ub(5,"button",3),b.cc("click",(function(){return e.close()})),b.Ic(6,"Close"),b.Tb(),b.Ic(7,"\xa0 "),b.Tb()),2&t&&(b.Cb(3),b.oc("ngIf",!e.isLoading))},directives:[r.i,i.l,r.c,v.b,r.f,_.b,_.f,k.b,U.a,I.b,i.k,I.a],pipes:[i.e],styles:[".form[_ngcontent-%COMP%]{line-height:normal}.mat-card[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]{-webkit-transition:box-shadow .28s cubic-bezier(.4,0,.2,1);transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:auto;min-height:598px}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();var V=n("Wp6s"),q=n("Qu3c"),J=n("Xa2L"),K=n("M9IT");function Y(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",11),b.cc("click",(function(){return b.zc(t),b.gc().openDialog(0,"create")})),b.Ic(1,"+ New Project"),b.Tb()}}function H(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-icon",20),b.cc("click",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc().openDialog(e._id,"edit")})),b.Ic(1,"edit"),b.Tb()}}function W(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-icon",21),b.cc("click",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc().onDelete(e._id)})),b.Ic(1,"delete"),b.Tb()}}const Q=function(t){return["/authorized/tickets",t]};function X(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",12),b.Ub(1,"mat-card",13),b.Ub(2,"mat-card-header"),b.Pb(3,"div",14),b.Ub(4,"mat-card-title",15),b.Ic(5),b.Tb(),b.Ub(6,"mat-card-subtitle",16),b.Ic(7),b.Tb(),b.Ub(8,"mat-card-actions"),b.Gc(9,H,2,0,"mat-icon",17),b.Gc(10,W,2,0,"mat-icon",18),b.Ub(11,"mat-icon",19),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc().projectInfoDialog(n._id)})),b.Ic(12,"info"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=e.$implicit,n=b.gc();b.Cb(3),b.oc("routerLink",b.tc(8,Q,t._id)),b.Cb(1),b.pc("matTooltip",t.project_name),b.oc("routerLink",b.tc(10,Q,t._id)),b.Cb(1),b.Jc(t.project_name),b.Cb(1),b.pc("matTooltip",t.project_desc),b.Cb(1),b.Jc(t.project_desc),b.Cb(2),b.oc("ngIf",3!=n.userData.role),b.Cb(1),b.oc("ngIf",3!=n.userData.role)}}function Z(t,e){1&t&&(b.Ub(0,"div",22),b.Ub(1,"p",23),b.Ic(2,"No Projects Found!"),b.Tb(),b.Tb())}function tt(t,e){1&t&&b.Pb(0,"mat-progress-spinner",24)}function et(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-paginator",25),b.cc("page",(function(e){return b.zc(t),b.gc().onChangedPage(e)})),b.Tb()}if(2&t){const t=b.gc();b.oc("length",t.Count)("pageSize",t.perPage)("pageSizeOptions",t.sizeOptions)}}let nt=(()=>{class t{constructor(t,e,n,i,a){this.projectsService=t,this.route=e,this.authService=n,this.dialog=i,this.router=a,this.projects=[],this.isLoading=!1,this.perPage=10,this.currentPage=1,this.Count=0,this.sizeOptions=[10,20,50],this.displayedColumns1=["Project Name","Description","Action"]}ngOnInit(){this.isLoading=!0,this.userData=this.authService.getUserData(),this.projectsService.getProjects(this.perPage,this.currentPage,this.search).subscribe(t=>{this.projects=t.data,this.isLoading=!1,this.Count=t.count})}onDelete(t){this.projectsService.deleteProject(t).subscribe(t=>{this.ngOnInit()})}onSearch(){this.ngOnInit()}onChangedPage(t){this.isLoading=!0,this.currentPage=t.pageIndex+1,this.perPage=t.pageSize,this.ngOnInit()}openDialog(t,e){const n=new r.e;n.disableClose=!0,n.autoFocus=!0,n.width="598px",n.data={id:t,mode:e},this.dialog.open(G,n).afterClosed().subscribe(t=>{this.ngOnInit()})}projectInfoDialog(t){const e=new r.e;e.disableClose=!1,e.autoFocus=!0,e.width="598px",e.data={id:t},this.dialog.open(N,e).afterClosed().subscribe(t=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(C),b.Ob(c.a),b.Ob(u.a),b.Ob(r.b),b.Ob(c.b))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-projects"]],decls:16,vars:6,consts:[[1,"card-container"],["action","#","autocomplete","off"],[2,"width","45%"],["matInput","","name","name","type","text","placeholder","Search",3,"ngModel","ngModelChange","keyup"],["nameInput","ngModel"],["md-list-icon",""],["class","btn btn-success float-right",3,"click",4,"ngIf"],["style","margin: 5px;",4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngIf"],["class","example-margin","mode","indeterminate","diameter","40","value","20",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"btn","btn-success","float-right",3,"click"],[2,"margin","5px"],[1,"example-card"],["mat-card-avatar","","matTooltip","View Project Tickets",1,"example-header-image",3,"routerLink"],[3,"matTooltip","routerLink"],[3,"matTooltip"],["md-list-icon","","color","primary","matTooltip","Edit Project",3,"click",4,"ngIf"],["matTooltip","Delete Project","color","warn","md-list-icon","",3,"click",4,"ngIf"],["matTooltip","Project Info","md-list-icon","",3,"click"],["md-list-icon","","color","primary","matTooltip","Edit Project",3,"click"],["matTooltip","Delete Project","color","warn","md-list-icon","",3,"click"],[2,"text-align","center"],[1,"info-text","mat-body-1"],["mode","indeterminate","diameter","40","value","20",1,"example-margin"],[3,"length","pageSize","pageSizeOptions","page"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"mat-card"),b.Ub(2,"form",1),b.Ub(3,"mat-form-field",2),b.Ub(4,"input",3,4),b.cc("ngModelChange",(function(t){return e.search=t}))("keyup",(function(){return e.onSearch()})),b.Tb(),b.Tb(),b.Ub(6,"mat-icon",5),b.Ic(7,"search"),b.Tb(),b.Gc(8,Y,2,0,"button",6),b.Tb(),b.Tb(),b.Tb(),b.Pb(9,"br"),b.Pb(10,"br"),b.Ub(11,"div",0),b.Gc(12,X,13,12,"div",7),b.Gc(13,Z,3,0,"div",8),b.Gc(14,tt,1,0,"mat-progress-spinner",9),b.Gc(15,et,1,3,"mat-paginator",10),b.Tb()),2&t&&(b.Cb(4),b.oc("ngModel",e.search),b.Cb(4),b.oc("ngIf",3!=e.userData.role),b.Cb(4),b.oc("ngForOf",e.projects),b.Cb(1),b.oc("ngIf",e.projects.length<=0&&!e.isLoading),b.Cb(1),b.oc("ngIf",e.isLoading),b.Cb(1),b.oc("ngIf",e.projects.length>0))},directives:[V.a,o.v,o.n,o.o,_.b,k.b,o.b,o.m,o.p,U.a,i.l,i.k,V.d,V.c,q.a,c.c,V.h,V.g,V.b,J.a,K.a],styles:[".mat-card[_ngcontent-%COMP%]{-webkit-transition:box-shadow .28s cubic-bezier(.4,0,.2,1);transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:70px}.btn.focus[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #fff}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #fafafa}.mat-input-element[_ngcontent-%COMP%]:focus{font:inherit;color:#f89b46;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.btn-success[_ngcontent-%COMP%]{color:#f89b46;background-color:#fff;border-color:#f89b46}table[_ngcontent-%COMP%]{margin:27px}mat-paginator[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:98%}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success.focus[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:focus{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important;box-shadow:#f89b46!important}.example-card[_ngcontent-%COMP%]{width:100%;margin:15px}.example-card[_ngcontent-%COMP%]:hover{width:100%;background-color:#a09d9d}.example-header-image[_ngcontent-%COMP%]{background-image:url(/assets/proj.jpg);background-size:cover}mat-card-subtitle[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{white-space:nowrap;width:105px;overflow:hidden;text-overflow:ellipsis}.example-tooltip-red[_ngcontent-%COMP%]{background:#b71c1c!important}.mat-card[_ngcontent-%COMP%]{background:#fff;width:100%;color:#f89b46;height:90px;min-width:100%}mat-icon[_ngcontent-%COMP%]{margin:9px}"]}),t})();const it=g.a.apiUrl+"/tickets",at=g.a.apiUrl+"/tasks";let ot=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getTicketsByProjectId(t,e,n,i){var a=`?pagesize=${t}&page=${e}`;return n&&(a+=`&search=${n}`),this.http.get(it+"/gettickets/"+i+a)}getTickets(t,e,n){var i=`?pagesize=${t}&page=${e}`;return n&&(i+=`&search=${n}`),this.http.get(it+"/gettickets"+i)}getUserData(){return this.authService.getUserData()}addTicket(t,e){const n={ticket_name:t.ticket_name,ticket_desc:t.ticket_desc,ticket_priority:t.ticket_priority,projectId:e,userId:this.authService.getUserId()};return this.http.post(it+"/create",n)}getTicketById(t){return this.http.get(it+"/"+t)}updateTicket(t,e){console.log(t);let n={id:t._id,ticket_name:t.ticket_name,ticket_desc:e.ticket_desc,projectId:t.projectId._id,userId:this.authService.getUserId()};return this.http.put(it+"/"+t._id,n)}updateTicketStatus(t){console.log(t);let e={id:t.id,status:t.status,ticket_priority:t.ticket_priority,userId:this.authService.getUserId()};return this.http.put(it+"/updatestatus/"+t.id,e)}deleteTicket(t){return this.http.delete(it+"/"+t)}getTicketTages(t){return this.http.get(at+"/gettasktages/"+t)}}return t.\u0275fac=function(e){return new(e||t)(b.Yb(p.b),b.Yb(c.b),b.Yb(u.a))},t.\u0275prov=b.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ct=n("d3UM");function rt(t,e){1&t&&(b.Ub(0,"h1",16),b.Ic(1,"Edit Ticket"),b.Tb())}function st(t,e){1&t&&(b.Ub(0,"h1",16),b.Ic(1,"Create New Ticket"),b.Tb())}function lt(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Please Enter Project Name."),b.Tb())}function bt(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Please Enter Project Description."),b.Tb())}function dt(t,e){if(1&t&&(b.Ub(0,"mat-option",17),b.Ic(1),b.Tb()),2&t){const t=e.$implicit;b.oc("value",t),b.Cb(1),b.Kc(" ",t," ")}}function mt(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Select Ticket Priority."),b.Tb())}let gt=(()=>{class t{constructor(t,e,n,i,a,o){this.ticketsService=t,this.dialogRef=e,this.route=n,this.router=i,this.dialog=a,this.isLoading=!0,this.ticket=[],this.disablerole=!0,this.data=[],this.isEdit=!0,this.ticket_priority=["High","Medium","Low"],this.data=o,this.ticket={_id:"",ticket_name:"",ticket_desc:"",projectId:{},ticket_priority:""}}ngOnInit(){this.data.id&&"edit"==this.data.mode?this.ticketsService.getTicketById(this.data.id).subscribe(t=>{this.isLoading=!1,this.isEdit=!0,this.mode="edit",this.ticket={_id:t.data[0]._id,ticket_name:t.data[0].ticket_name,ticket_desc:t.data[0].ticket_desc,projectId:t.data[0].projectId,ticket_priority:t.data[0].ticket_priority}}):(this.isLoading=!1,this.mode="create",this.isEdit=!1,this.userId=null)}onSave(t){t.invalid||("create"===this.mode?this.ticketsService.addTicket(t.value,this.data.pid).subscribe(t=>{this.dialogRef.close()},t=>{console.log(t)}):this.ticketsService.updateTicket(this.ticket,t.value).subscribe(t=>{this.dialogRef.close()},t=>{console.log(t)}))}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(ot),b.Ob(r.h),b.Ob(c.a),b.Ob(c.b),b.Ob(r.b),b.Ob(r.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-create-ticket"]],decls:31,vars:11,consts:[["mat-dialog-title","",4,"ngIf"],[3,"submit"],["ticketForm","ngForm"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","name","ticket_name","type","text","placeholder","ticket Name","required","",3,"ngModel","ngModelChange"],["nameInput","ngModel"],[4,"ngIf"],["matInput","","name","ticket_desc","type","text","placeholder","Description","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["name","ticket_priority","placeholder","Select Priority","required","",3,"ngModel","ngModelChange"],["ticketInput","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-card-actions","","align","end"],["mat-raised-button","","color","primary","matDialogClose","",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-dialog-title",""],[3,"value"]],template:function(t,e){if(1&t){const t=b.Vb();b.Gc(0,rt,2,0,"h1",0),b.Gc(1,st,2,0,"h1",0),b.Ub(2,"form",1,2),b.cc("submit",(function(){b.zc(t);const n=b.wc(3);return e.onSave(n)})),b.Ub(4,"div",3),b.Ub(5,"mat-form-field",4),b.Ub(6,"mat-label"),b.Ic(7,"Ticket"),b.Tb(),b.Ub(8,"input",5,6),b.cc("ngModelChange",(function(t){return e.ticket.ticket_name=t})),b.Tb(),b.Gc(10,lt,2,0,"mat-error",7),b.Tb(),b.Ub(11,"mat-form-field",4),b.Ub(12,"mat-label"),b.Ic(13,"Description"),b.Tb(),b.Ub(14,"textarea",8,9),b.cc("ngModelChange",(function(t){return e.ticket.ticket_desc=t})),b.Ic(16),b.Tb(),b.Gc(17,bt,2,0,"mat-error",7),b.Tb(),b.Ub(18,"mat-form-field",4),b.Ub(19,"mat-label"),b.Ic(20,"Ticket Priority"),b.Tb(),b.Ub(21,"mat-select",10,11),b.cc("ngModelChange",(function(t){return e.ticket.ticket_priority=t})),b.Gc(23,dt,2,2,"mat-option",12),b.Tb(),b.Gc(24,mt,2,0,"mat-error",7),b.Tb(),b.Tb(),b.Ub(25,"div",13),b.Ub(26,"button",14),b.cc("click",(function(){return e.close()})),b.Ic(27,"Close"),b.Tb(),b.Ic(28,"\xa0 "),b.Ub(29,"button",15),b.Ic(30,"Save"),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.wc(3),n=b.wc(9),i=b.wc(15),a=b.wc(22);b.oc("ngIf","edit"==e.mode),b.Cb(1),b.oc("ngIf","create"==e.mode),b.Cb(7),b.oc("ngModel",e.ticket.ticket_name),b.Cb(2),b.oc("ngIf",n.hasError("required")),b.Cb(4),b.oc("ngModel",e.ticket.ticket_desc),b.Cb(2),b.Jc(e.ticket.ticket_desc),b.Cb(1),b.oc("ngIf",i.hasError("required")),b.Cb(4),b.oc("ngModel",e.ticket.ticket_priority),b.Cb(2),b.oc("ngForOf",e.ticket_priority),b.Cb(1),b.oc("ngIf",a.hasError("required")),b.Cb(5),b.oc("disabled",t.invalid)}},directives:[i.l,o.v,o.n,o.o,r.f,_.b,_.f,k.b,o.b,o.t,o.m,o.p,ct.a,i.k,v.b,r.d,r.i,_.a,P.n],styles:[".form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();function pt(t,e){if(1&t&&(b.Ub(0,"mat-chip"),b.Ic(1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.Lc(" ",t.first_name," ",t.last_name," ")}}function ut(t,e){if(1&t&&(b.Ub(0,"div",9),b.Ub(1,"div",10),b.Ub(2,"mat-icon",11),b.Ic(3,"group"),b.Tb(),b.Ub(4,"mat-label"),b.Ic(5,"Assigned Users"),b.Tb(),b.Pb(6,"br"),b.Tb(),b.Ub(7,"div",10),b.Ub(8,"mat-chip-list",null,12),b.Gc(10,pt,2,2,"mat-chip",13),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.gc(2);b.Cb(10),b.oc("ngForOf",t.ticket.projectId.assignedUsers)}}function ht(t,e){if(1&t&&(b.Ub(0,"div",4),b.Ub(1,"mat-form-field",5),b.Ub(2,"mat-label"),b.Ic(3,"Project Name"),b.Tb(),b.Pb(4,"input",6),b.Tb(),b.Ub(5,"mat-form-field",5),b.Ub(6,"mat-label"),b.Ic(7,"Project Description"),b.Tb(),b.Ub(8,"textarea",7),b.Ic(9),b.Tb(),b.Tb(),b.Gc(10,ut,11,1,"div",8),b.Pb(11,"br"),b.Ub(12,"mat-form-field",5),b.Ub(13,"mat-label"),b.Ic(14,"Ticket Priority"),b.Tb(),b.Pb(15,"input",6),b.Tb(),b.Ub(16,"mat-form-field",5),b.Ub(17,"mat-label"),b.Ic(18,"Created By"),b.Tb(),b.Pb(19,"input",6),b.Tb(),b.Ub(20,"mat-form-field",5),b.Ub(21,"mat-label"),b.Ic(22,"Email"),b.Tb(),b.Pb(23,"input",6),b.Tb(),b.Ub(24,"mat-form-field",5),b.Ub(25,"mat-label"),b.Ic(26,"updated By"),b.Tb(),b.Pb(27,"input",6),b.Tb(),b.Ub(28,"mat-form-field",5),b.Ub(29,"mat-label"),b.Ic(30,"Created At"),b.Tb(),b.Pb(31,"input",6),b.hc(32,"date"),b.Tb(),b.Ub(33,"mat-form-field",5),b.Ub(34,"mat-label"),b.Ic(35,"Updated At"),b.Tb(),b.Pb(36,"input",6),b.hc(37,"date"),b.Tb(),b.Ub(38,"mat-form-field",5),b.Ub(39,"mat-label"),b.Ic(40,"Status"),b.Tb(),b.Pb(41,"input",6),b.Tb(),b.Tb()),2&t){const t=b.gc();b.Cb(4),b.pc("value",t.ticket.ticket_name),b.Cb(5),b.Jc(t.ticket.ticket_desc),b.Cb(1),b.oc("ngIf",t.ticket.projectId.assignedUsers.length>0),b.Cb(5),b.pc("value",t.ticket.ticket_priority),b.Cb(4),b.rc("value","",t.ticket.userId.first_name," ",t.ticket.userId.last_name,""),b.Cb(4),b.pc("value",t.ticket.userId.email),b.Cb(4),b.rc("value","",t.ticket.updatedBy.first_name," ",t.ticket.userId.last_name,""),b.Cb(4),b.pc("value",b.ic(32,12,t.ticket.createdAt)),b.Cb(5),b.pc("value",b.ic(37,14,t.ticket.updatedAt)),b.Cb(5),b.pc("value",t.ticket.status)}}let ft=(()=>{class t{constructor(t,e,n,i,a,o){this.ticketsService=t,this.route=e,this.dialogRef=n,this.router=i,this.dialog=a,this.isLoading=!0,this.ticket=[],this.data=[],this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.data=o}ngOnInit(){this.isLoading=!0,this.ticketsService.getTicketById(this.data.id).subscribe(t=>{this.isLoading=!1,this.ticket=t.data[0]})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(ot),b.Ob(c.a),b.Ob(r.h),b.Ob(c.b),b.Ob(r.b),b.Ob(r.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-ticket-info"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["class","font","mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","readonly","",3,"value"],["matInput","","type","text","readonly",""],["class","container",4,"ngIf"],[1,"container"],[1,"row"],["md-list-icon",""],["chipList",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(b.Ub(0,"div"),b.Ub(1,"h2",0),b.Ic(2,"Project Info"),b.Tb(),b.Tb(),b.Gc(3,ht,42,16,"div",1),b.Ub(4,"div",2),b.Ub(5,"button",3),b.cc("click",(function(){return e.close()})),b.Ic(6,"Close"),b.Tb(),b.Ic(7,"\xa0 "),b.Tb()),2&t&&(b.Cb(3),b.oc("ngIf",!e.isLoading))},directives:[r.i,i.l,r.c,v.b,r.f,_.b,_.f,k.b,U.a,I.b,i.k,I.a],pipes:[i.e],styles:[".form[_ngcontent-%COMP%]{line-height:normal}.mat-card[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]{-webkit-transition:box-shadow .28s cubic-bezier(.4,0,.2,1);transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:auto;min-height:598px}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();const Ct=g.a.apiUrl+"/comments";let _t=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getCommentsByTicketId(t,e,n,i){var a=`?pagesize=${t}&page=${e}`;return n&&(a+=`&search=${n}`),this.http.get(Ct+"/getcomments/"+i+a)}getUserId(){return this.authService.getUserId()}addComment(t){const e=new FormData;return e.append("file",t.file),e.append("filename",t.filename),e.append("comment",t.comment),e.append("projectId",t.pid),e.append("ticketId",t.tid),e.append("userId",this.authService.getUserId()),e.append("fileType",t.fileType),console.log(t),this.http.post(Ct+"/create",e)}getCommentById(t){return this.http.get(Ct+"/"+t)}updateComment(t,e,n){return console.log(t),this.http.put(Ct+"/"+t._id,{id:t._id,ticket_name:t.ticket_name,ticket_desc:e.ticket_desc,projectId:t.projectId._id,ticket_priority:e.ticket_priority,userId:n})}deleteFile(t,e){return this.http.put(Ct+"/deletefile/"+t,{id:t,file_url:e})}deleteComment(t){return this.http.delete(Ct+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(b.Yb(p.b),b.Yb(c.b),b.Yb(u.a))},t.\u0275prov=b.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const kt=g.a.apiUrl+"/tasks";let Tt=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getTaskByTicketId(t,e,n,i,a){var o=`?pagesize=${t}&page=${e}`;return n&&(o+=`&search=${n}`),a.userId&&null!=a.userId&&(o+=`&userId=${a.userId}`),a.filter&&(o+=`&filter=${a.filter}`),a.tage&&(o+=`&tage=${a.tage}`),this.http.get(kt+"/gettasks/"+i+o)}getUserId(){return this.authService.getUserId()}addTask(t){const e={task_name:t.task_name,tags:t.tags,task_desc:t.task_desc,start_date:t.start_date,end_date:t.end_date,assignedUsers:t.assignedUsers,projectId:t.pid,ticketId:t.tid,userId:this.authService.getUserId()};return this.http.post(kt+"/create",e)}getTaskById(t){return this.http.get(kt+"/"+t)}updateTaskStatus(t){return t.userId=this.authService.getUserId(),this.http.put(kt+"/updatestatus/"+t.id,t)}moveTasktoTicket(t,e){console.log(t,e);let n={id:t._id,ticketId:e.ticketId._id,userId:this.authService.getUserId()};return this.http.put(kt+"/movetask/"+t._id,n)}updateTask(t){return this.http.put(kt+"/"+t._id,t)}deleteTask(t){return this.http.delete(kt+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(b.Yb(p.b),b.Yb(c.b),b.Yb(u.a))},t.\u0275prov=b.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var vt=n("ihCf"),Ut=n("iadO");const It=["assigneeInput"],Pt=["auto"];function Ot(t,e){if(1&t&&(b.Ub(0,"mat-option",13,14),b.Ic(2),b.Tb()),2&t){const t=e.$implicit;b.oc("value",t),b.Cb(2),b.Kc(" ",t.ticket_name," ")}}function xt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div"),b.Ub(1,"div"),b.Ub(2,"mat-icon",1),b.cc("click",(function(){return b.zc(t),b.gc().viewPage()})),b.Ic(3,"info"),b.Tb(),b.Tb(),b.Pb(4,"br"),b.Pb(5,"br"),b.Ub(6,"div"),b.Ub(7,"div"),b.Ub(8,"h2"),b.Ic(9,"Move Task to Other"),b.Tb(),b.Tb(),b.Ub(10,"form",2,3),b.cc("submit",(function(){b.zc(t);const e=b.wc(11);return b.gc().moveTask(e)})),b.Ub(12,"mat-form-field",4),b.Ub(13,"mat-label"),b.Ic(14,"Search Ticks"),b.Tb(),b.Ub(15,"input",5,6),b.cc("ngModelChange",(function(e){return b.zc(t),b.gc().ticketId=e}))("keyup",(function(){b.zc(t);const e=b.wc(16);return b.gc().searchTickets(e.value)})),b.Tb(),b.Ub(17,"mat-autocomplete",7,8),b.Gc(19,Ot,3,2,"mat-option",9),b.Tb(),b.Tb(),b.Ub(20,"div",10),b.Ub(21,"a",11),b.cc("click",(function(){return b.zc(t),b.gc().close()})),b.Ic(22,"close"),b.Tb(),b.Ub(23,"button",12),b.Ic(24,"Move"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.wc(11),e=b.wc(18),n=b.gc();b.Cb(15),b.oc("ngModel",n.ticketId)("matAutocomplete",e),b.Cb(2),b.oc("displayWith",n.displayFn1),b.Cb(2),b.oc("ngForOf",n.tickets),b.Cb(4),b.oc("disabled",t.invalid)}}function Mt(t,e){1&t&&(b.Ub(0,"h1"),b.Ic(1,"Edit Task"),b.Tb())}function wt(t,e){1&t&&(b.Ub(0,"h1"),b.Ic(1,"New Task"),b.Tb())}function yt(t,e){if(1&t&&(b.Ub(0,"span",43),b.Ic(1),b.Tb()),2&t){const t=b.gc(3);b.Cb(1),b.Lc(" (+",t.selectedTage.length-1," ",2===(null==t.selectedTage?null:t.selectedTage.length)?"other":"others",") ")}}function jt(t,e){if(1&t&&(b.Ub(0,"mat-select-trigger"),b.Ic(1),b.Gc(2,yt,2,2,"span",42),b.Tb()),2&t){const t=b.gc(2);b.Cb(1),b.Kc(" ",t.selectedTage?t.selectedTage[0].name:""," "),b.Cb(1),b.oc("ngIf",(null==t.selectedTage?null:t.selectedTage.length)>1)}}function St(t,e){if(1&t&&(b.Ub(0,"mat-option",13),b.Ic(1),b.Tb()),2&t){const t=e.$implicit;b.oc("value",t),b.Cb(1),b.Jc(t.name)}}function zt(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Enter Task Title."),b.Tb())}function Ft(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Please Select Start Date."),b.Tb())}function Dt(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Please Select Due Date."),b.Tb())}function Gt(t,e){1&t&&(b.Ub(0,"mat-icon",51),b.Ic(1,"cancel"),b.Tb())}function Lt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-chip",48),b.cc("removed",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).remove(n)})),b.Ub(1,"a",49),b.Ic(2),b.Tb(),b.Gc(3,Gt,2,0,"mat-icon",50),b.Tb()}if(2&t){const t=e.$implicit,n=b.gc(3);b.rc("matTooltip","",t.first_name," ",t.last_name,""),b.oc("selectable",n.selectable)("removable",n.removable),b.Cb(2),b.Lc("",t.first_name," ",t.last_name,""),b.Cb(1),b.oc("ngIf",n.removable)}}function At(t,e){if(1&t&&(b.Ub(0,"div",44),b.Ub(1,"div",16),b.Ub(2,"mat-icon",45),b.Ic(3,"group"),b.Tb(),b.Ub(4,"mat-label"),b.Ic(5,"Assigned Users"),b.Tb(),b.Pb(6,"br"),b.Tb(),b.Ub(7,"div",16),b.Ub(8,"mat-chip-list",null,46),b.Gc(10,Lt,4,7,"mat-chip",47),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.gc(2);b.Cb(10),b.oc("ngForOf",t.assignedUsers)}}function $t(t,e){if(1&t&&(b.Ub(0,"mat-option",13,14),b.Ic(2),b.Tb()),2&t){const t=e.$implicit;b.oc("value",t),b.Cb(2),b.Lc(" ",t.first_name," ",t.last_name," ")}}function Bt(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Enter Task Note."),b.Tb())}function Et(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div"),b.Ub(1,"div",15),b.Ub(2,"div",16),b.Ub(3,"div",17),b.Gc(4,Mt,2,0,"h1",0),b.Gc(5,wt,2,0,"h1",0),b.Tb(),b.Ub(6,"div",17),b.Ub(7,"mat-form-field",18),b.Ub(8,"mat-label"),b.Ic(9,"Tages"),b.Tb(),b.Ub(10,"mat-select",19,20),b.cc("valueChange",(function(e){return b.zc(t),b.gc().selectedTage=e})),b.Gc(12,jt,3,2,"mat-select-trigger",0),b.Gc(13,St,2,2,"mat-option",9),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(14,"form",2,21),b.cc("submit",(function(){b.zc(t);const e=b.wc(15);return b.gc().onCreate(e)})),b.Ub(16,"div",22),b.Ub(17,"mat-form-field",23),b.Ub(18,"mat-label"),b.Ic(19,"Title"),b.Tb(),b.Ub(20,"textarea",24,25),b.cc("ngModelChange",(function(e){return b.zc(t),b.gc().task.task_name=e})),b.Ic(22),b.Tb(),b.Gc(23,zt,2,0,"mat-error",0),b.Tb(),b.Ub(24,"div",16),b.Ub(25,"div",17),b.Ub(26,"mat-form-field",23),b.Ub(27,"mat-label"),b.Ic(28,"Start Date"),b.Tb(),b.Ub(29,"input",26,27),b.cc("ngModelChange",(function(e){return b.zc(t),b.gc().task.start_date=e})),b.Tb(),b.Pb(31,"mat-datepicker-toggle",28),b.Pb(32,"mat-datepicker",29,30),b.Gc(34,Ft,2,0,"mat-error",0),b.Tb(),b.Tb(),b.Ub(35,"div",17),b.Ub(36,"mat-form-field",23),b.Ub(37,"mat-label"),b.Ic(38,"Due Date"),b.Tb(),b.Ub(39,"input",31,32),b.cc("ngModelChange",(function(e){return b.zc(t),b.gc().task.end_date=e})),b.Tb(),b.Pb(41,"mat-datepicker-toggle",28),b.Pb(42,"mat-datepicker",29,33),b.Gc(44,Dt,2,0,"mat-error",0),b.Tb(),b.Tb(),b.Tb(),b.Gc(45,At,11,1,"div",34),b.Pb(46,"br"),b.Ub(47,"mat-form-field",35),b.Ub(48,"mat-label"),b.Ic(49,"Assign Users"),b.Tb(),b.Ub(50,"input",36,37),b.cc("keyup",(function(){b.zc(t);const e=b.wc(51);return b.gc().searchUsers(e.value)})),b.Tb(),b.Ub(53,"mat-autocomplete",38,8),b.cc("optionSelected",(function(e){return b.zc(t),b.gc().onSelection(e)})),b.Gc(55,$t,3,3,"mat-option",9),b.Tb(),b.Tb(),b.Ub(56,"mat-form-field",23),b.Ub(57,"mat-label"),b.Ic(58,"Note"),b.Tb(),b.Ub(59,"textarea",39,40),b.cc("ngModelChange",(function(e){return b.zc(t),b.gc().task.task_desc=e})),b.Ic(61),b.Tb(),b.Gc(62,Bt,2,0,"mat-error",0),b.Tb(),b.Tb(),b.Ub(63,"div",10),b.Ub(64,"button",41),b.cc("click",(function(){return b.zc(t),b.gc().close()})),b.Ic(65,"Close"),b.Tb(),b.Ic(66,"\xa0 "),b.Ub(67,"button",12),b.Ic(68,"Save"),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.wc(15),e=b.wc(21),n=b.wc(30),i=b.wc(33),a=b.wc(40),o=b.wc(43),c=b.wc(54),r=b.wc(60),s=b.gc();b.Cb(4),b.oc("ngIf","update"==s.data.mode),b.Cb(1),b.oc("ngIf","add"==s.data.mode),b.Cb(5),b.oc("value",s.selectedTage)("compareWith",s.comparer),b.Cb(2),b.oc("ngIf",s.selectedTage&&s.selectedTage.length>0),b.Cb(1),b.oc("ngForOf",s.tags),b.Cb(7),b.oc("ngModel",s.task.task_name),b.Cb(2),b.Jc(s.task.task_name),b.Cb(1),b.oc("ngIf",e.hasError("required")),b.Cb(6),b.oc("min",s.minDate)("max",s.maxDate)("matDatepicker",i)("ngModel",s.task.start_date),b.Cb(2),b.oc("for",i),b.Cb(3),b.oc("ngIf",n.hasError("required")),b.Cb(5),b.oc("min",s.minDate)("max",s.maxDate)("matDatepicker",o)("ngModel",s.task.end_date),b.Cb(2),b.oc("for",o),b.Cb(3),b.oc("ngIf",a.hasError("required")),b.Cb(1),b.oc("ngIf",s.assignedUsers.length>0),b.Cb(5),b.oc("matAutocomplete",c)("formControl",s.fruitCtrl),b.Cb(3),b.oc("displayWith",s.displayFn),b.Cb(2),b.oc("ngForOf",s.searchUser),b.Cb(4),b.oc("ngModel",s.task.task_desc),b.Cb(2),b.Jc(s.task.task_desc),b.Cb(1),b.oc("ngIf",r.hasError("required")),b.Cb(5),b.oc("disabled",t.invalid)}}let Rt=(()=>{class t{constructor(t,e,n,i,a,c,r,s){this.ticketsService=t,this.commentService=e,this.projectsService=n,this.taskService=i,this._snackBar=a,this.dialogRef=c,this.dialog=r,this.data=[],this.toppings=new o.d,this.tickets=[],this.sankBardata={},this.fruitCtrl=new o.d,this.searchUser=[],this.assignedUsers=[],this.task={},this.tags=[{color:"#49b560",name:"Frontend"},{color:"#f44336",name:"Backend"},{color:"#ffb300",name:"API"},{color:"#0729ca",name:"Issue"},{color:"#d700ff",name:"Mobile"},{color:"#009cb5",name:"future"},{color:"#000",name:"Other"}],this.taskList=["To Do","Inprogress","Done","Closed"],this.horizontalPos="right",this.verticalPos="top",this.selectable=!0,this.page=!0,this.removable=!0,this.selectedTage=[],this.data=s,this.task={_id:"",task_name:"",task_desc:"",assignedUsers:[],start_date:"",end_date:""},this.userId=this.commentService.getUserId(),this.viewpage="comments",console.log(this.data);const l=(new Date).getFullYear();this.minDate=new Date,this.maxDate=new Date(l+0,11,31),console.log(this.maxDate,this.minDate)}ngOnInit(){this.data.task._id&&"update"==this.data.mode&&(this.task=this.data.task,this.selectedTage=this.data.task.tags,this.assignedUsers=this.data.task.assignedUsers)}comparer(t,e){return t&&e?t.name===e.name:e==e}searchTickets(t){t&&this.ticketsService.getTicketsByProjectId(0,1,t,this.data.task.projectId._id).subscribe(t=>{this.tickets=t.data})}searchUsers(t){if(t){var e=this.data.task.projectId.assignedUsers.filter(e=>e.first_name.toLowerCase().includes(t)||e.last_name.toLowerCase().includes(t));console.log(e),this.searchUser=e}}displayFn(t){return t?t.first_name+" "+t.last_name:""}onSelection(t){const e=t.option.value;let n=this.assignedUsers.findIndex(t=>t._id===e._id);console.log(n,e),-1==n?(this.assignedUsers.push(t.option.value),this.assigneeInput.nativeElement.value="",this.fruitCtrl.setValue(null)):(this.sankBardata.message="User Allready Exist in this Task.",this.openSnakBar(),this.fruitCtrl.setValue(null))}displayFn1(t){return t?t.ticket_name:""}selected(t){this.assignedUsers.push(t.option.viewValue),this.assignedUsers.nativeElement.value="",this.assignedUsers.setValue(null)}remove(t){const e=this.assignedUsers.indexOf(t);e>=0&&this.assignedUsers.splice(e,1)}openSnakBar(){let t=new l.b;t.verticalPosition=this.verticalPos,t.horizontalPosition=this.horizontalPos,t.duration=8e3,this._snackBar.open(this.sankBardata.message,"Ok",t)}onCreate(t){if(!t.invalid)if(console.log(this.selectedTage),"update"==this.data.mode)this.data.task.assignedUsers=this.assignedUsers,this.data.task.tags=this.selectedTage,this.taskService.updateTask(this.data.task).subscribe(t=>{this.sankBardata.message="Task Updated.",this.openSnakBar(),this.dialogRef.close()});else{console.log(t.value,this.toppings.value);let e={};e.task_name=t.value.task_name,e.task_desc=t.value.task_desc,e.tags=this.selectedTage,e.start_date=t.value.start_date,e.end_date=t.value.end_date,e.assignedUsers=this.assignedUsers,e.pid=this.data.task.projectId._id,e.tid=this.data.task._id,this.taskService.addTask(e).subscribe(t=>{this.sankBardata.message="Task Created.",this.openSnakBar(),this.dialogRef.close()})}}moveTask(t){t.invalid||(console.log(this.data.task),this.taskService.moveTasktoTicket(this.data.task,t.value).subscribe(t=>{this.sankBardata.message="Task Updated.",this.openSnakBar(),this.dialogRef.close()}))}viewPage(){this.page=!this.page}onChangeStatus(t,e){console.log(t,e),t.status=e,t.assignedUsers=this.assignedUsers,this.taskService.updateTaskStatus(t).subscribe(t=>{this.sankBardata.message="Task Updated.",this.openSnakBar(),this.dialogRef.close()})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(ot),b.Ob(_t),b.Ob(C),b.Ob(Tt),b.Ob(l.a),b.Ob(r.h),b.Ob(r.b),b.Ob(r.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-common-popup"]],viewQuery:function(t,e){var n;1&t&&(b.Nc(It,!0),b.Nc(Pt,!0)),2&t&&(b.vc(n=b.dc())&&(e.assigneeInput=n.first),b.vc(n=b.dc())&&(e.matAutocomplete=n.first))},decls:2,vars:2,consts:[[4,"ngIf"],["matTooltip","Move Task",2,"float","right",3,"click"],[3,"submit"],["moveTaskForm","ngForm"],["appearance","outline",1,"status_cus",2,"height","1px","top","-20px"],["type","text","name","ticketId","matInput","","placeholder","Serach Tickets...","required","",3,"ngModel","matAutocomplete","ngModelChange","keyup"],["assigneeInput",""],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-card-actions","","align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],["datae",""],["mat-dialog-title",""],[1,"row"],[1,"col-md-6"],["appearance","outline",2,"font-size","11px","width","49%","float","right"],["name","tags","placeholder","Choose tags","multiple","",3,"value","compareWith","valueChange"],["toppings",""],["createTaskForm","ngForm"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","name","task_name","type","text","placeholder","Task Title","required","",3,"ngModel","ngModelChange"],["nameInput","ngModel"],["matInput","","readonly","","name","start_date","placeholder","Select Start Date","required","",3,"min","max","matDatepicker","ngModel","ngModelChange"],["sdataInput","ngModel"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],["matInput","","readonly","","name","end_date","placeholder","Select Due Date","required","",3,"min","max","matDatepicker","ngModel","ngModelChange"],["edataInput","ngModel"],["picker1",""],["class","container",4,"ngIf"],["appearance","outline",2,"width","100%"],["type","text","matInput","","placeholder","New User...",3,"matAutocomplete","formControl","keyup"],["assigneeInput","","assigneeInput",""],[3,"displayWith","optionSelected"],["matInput","","name","task_desc","type","text","placeholder","Description","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["mat-raised-button","","color","primary","matDialogClose","",3,"click"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"],[1,"container"],["md-list-icon",""],["chipList",""],[3,"matTooltip","selectable","removable","removed",4,"ngFor","ngForOf"],[3,"matTooltip","selectable","removable","removed"],[1,"formate_chip"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,e){1&t&&(b.Gc(0,xt,25,5,"div",0),b.Gc(1,Et,69,30,"div",0)),2&t&&(b.oc("ngIf","info"==e.data.mode),b.Cb(1),b.oc("ngIf","add"==e.data.mode||"update"==e.data.mode))},directives:[i.l,U.a,q.a,o.v,o.n,o.o,_.b,_.f,k.b,o.b,T.c,o.t,o.m,o.p,T.a,i.k,v.a,v.b,P.n,r.i,ct.a,r.f,vt.b,Ut.b,Ut.d,_.g,Ut.a,o.e,r.d,ct.c,_.a,I.b,I.a,I.c],styles:[".form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();var Nt=n("MutI"),Vt=n("STbY");const qt=["assigneeInput"],Jt=["auto"];function Kt(t,e){1&t&&b.Pb(0,"mat-progress-spinner",2)}function Yt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-chip",15),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(2).filter(n)})),b.Ub(1,"a",16),b.Ic(2),b.Tb(),b.Tb()}if(2&t){const t=e.$implicit;b.rc("matTooltip","",t.first_name," ",t.last_name,""),b.Cb(2),b.Lc("",t.first_name," ",t.last_name,"")}}function Ht(t,e){1&t&&(b.Ub(0,"mat-icon",19),b.Ic(1,"cancel"),b.Tb())}function Wt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-chip",17),b.cc("removed",(function(){return b.zc(t),b.gc(2).removeFilter()})),b.Ic(1,"clear "),b.Gc(2,Ht,2,0,"mat-icon",18),b.Tb()}if(2&t){const t=b.gc(2);b.oc("selectable",t.selectable)("removable",t.removable),b.Cb(2),b.oc("ngIf",t.removable)}}function Qt(t,e){1&t&&(b.Ub(0,"mat-error"),b.Ic(1,"Write Your Comment..."),b.Tb())}function Xt(t,e){if(1&t&&(b.Ub(0,"div",42),b.Ub(1,"a"),b.Ic(2),b.Tb(),b.Tb()),2&t){const t=b.gc(3);b.pc("matTooltip",t.selectedFileName),b.Cb(2),b.Jc(t.selectedFileName)}}function Zt(t,e){1&t&&(b.Ub(0,"mat-progress-spinner",43),b.Ic(1,"Loading Comments..."),b.Tb())}function te(t,e){if(1&t&&(b.Ub(0,"div",47),b.Ub(1,"div",48),b.Ub(2,"span",49),b.Ic(3),b.Tb(),b.Ub(4,"p"),b.Ic(5),b.Tb(),b.Ub(6,"p"),b.Ub(7,"small"),b.Ic(8),b.hc(9,"date"),b.hc(10,"date"),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.gc().$implicit,e=b.gc(4);b.Cb(2),b.rc("matTooltip","",t.userId.first_name," ",t.userId.last_name,""),b.Cb(1),b.Jc(e.formateName(t.userId.first_name,t.userId.last_name)),b.Cb(2),b.Jc(t.comment),b.Cb(3),b.Lc("",b.jc(9,6,t.createdAt,"mediumDate")," at ",b.jc(10,9,t.createdAt,"shortTime"),"")}}function ee(t,e){if(1&t&&(b.Ub(0,"a",54),b.Ub(1,"mat-icon",55),b.Ic(2,"attachment"),b.Tb(),b.Tb()),2&t){const t=b.gc(2).$implicit,e=b.gc(4);b.pc("matTooltip",t.file_url),b.rc("href","",e.host_ip,"/uploads/",t.file_url,"",b.Ac)}}function ne(t,e){if(1&t&&(b.Ub(0,"div",50),b.Ub(1,"div",51),b.Ub(2,"span"),b.Ub(3,"p",52),b.Ic(4),b.Tb(),b.Tb(),b.Ub(5,"p"),b.Ic(6),b.Tb(),b.Ub(7,"p"),b.Gc(8,ee,3,3,"a",53),b.Ub(9,"small"),b.Ic(10),b.hc(11,"date"),b.hc(12,"date"),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.gc().$implicit,e=b.gc(4);b.Cb(3),b.rc("matTooltip","",t.first_name," ",t.last_name,""),b.Cb(1),b.Jc(e.formateName(t.userId.first_name,t.userId.last_name)),b.Cb(2),b.Jc(t.comment),b.Cb(2),b.oc("ngIf",t.file_url),b.Cb(2),b.Lc("",b.jc(11,7,t.createdAt,"mediumDate")," at ",b.jc(12,10,t.createdAt,"shortTime"),"")}}function ie(t,e){if(1&t&&(b.Ub(0,"div"),b.Gc(1,te,11,12,"div",45),b.Gc(2,ne,13,13,"div",46),b.Tb()),2&t){const t=e.$implicit,n=b.gc(4);b.Cb(1),b.oc("ngIf",n.userId!=t.userId._id),b.Cb(1),b.oc("ngIf",n.userId==t.userId._id)}}function ae(t,e){1&t&&(b.Ub(0,"div"),b.Ic(1,"No Comments Found..!"),b.Tb())}function oe(t,e){if(1&t&&(b.Ub(0,"div"),b.Gc(1,ie,3,2,"div",44),b.Gc(2,ae,2,0,"div",1),b.Tb()),2&t){const t=b.gc(3);b.Cb(1),b.oc("ngForOf",t.comments),b.Cb(1),b.oc("ngIf",t.comments.length<=0)}}function ce(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div"),b.Ub(1,"div",20),b.Ub(2,"div",21),b.Ub(3,"mat-icon"),b.Ic(4,"notes"),b.Tb(),b.Ub(5,"mat-label",22),b.Ic(6,"Description"),b.Tb(),b.Tb(),b.Ub(7,"div",23),b.Ub(8,"div",24),b.Ub(9,"pre"),b.Ic(10),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(11,"div",25),b.Ub(12,"form",26,27),b.cc("submit",(function(){b.zc(t);const e=b.wc(13);return b.gc(2).onComment(e)})),b.Ub(14,"div",20),b.Ub(15,"div",28),b.Ub(16,"mat-form-field",29),b.Ub(17,"mat-label"),b.Ic(18,"Your Comment"),b.Tb(),b.Ub(19,"textarea",30,31),b.cc("ngModelChange",(function(e){return b.zc(t),b.gc(2).commentDataForm.comment=e})),b.Tb(),b.Ub(21,"mat-icon",32),b.Ic(22,"insert_comment"),b.Tb(),b.Gc(23,Qt,2,0,"mat-error",1),b.Tb(),b.Tb(),b.Ub(24,"div",33),b.Ub(25,"div"),b.Ub(26,"input",34,35),b.cc("change",(function(e){return b.zc(t),b.gc(2).selectFile(e)})),b.Tb(),b.Ub(28,"a",36),b.cc("click",(function(){return b.zc(t),b.wc(27).click()})),b.Ub(29,"mat-icon",37),b.Ic(30,"attachment"),b.Tb(),b.Tb(),b.Ub(31,"button",38),b.Ub(32,"mat-icon",39),b.Ic(33,"send"),b.Tb(),b.Tb(),b.Tb(),b.Pb(34,"br"),b.Gc(35,Xt,3,2,"div",40),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Gc(36,Zt,2,0,"mat-progress-spinner",41),b.Gc(37,oe,3,2,"div",1),b.Tb()}if(2&t){const t=b.wc(13),e=b.wc(20),n=b.gc(2);b.Cb(10),b.Kc("",n.ticket.ticket_desc," "),b.Cb(9),b.oc("ngModel",n.commentDataForm.comment),b.Cb(4),b.oc("ngIf",e.hasError("required")),b.Cb(8),b.oc("disabled",t.invalid),b.Cb(4),b.oc("ngIf",n.selectedFileName),b.Cb(1),b.oc("ngIf",n.isLoadingComments&&!n.isLoading),b.Cb(1),b.oc("ngIf",!n.isLoadingComments)}}function re(t,e){if(1&t&&(b.Ub(0,"p",68),b.Ic(1),b.Tb()),2&t){const t=b.gc(2).$implicit;b.Cb(1),b.Kc(" ",t.fileType," ")}}function se(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div"),b.Ub(1,"div",57),b.Ub(2,"a",58),b.Gc(3,re,2,1,"p",59),b.Tb(),b.Ub(4,"p",60),b.Ub(5,"span",61),b.Ic(6),b.Tb(),b.Ub(7,"a",62),b.Pb(8,"span",63),b.Tb(),b.Ub(9,"span",64),b.Ub(10,"span"),b.Ic(11,"Added on"),b.Ub(12,"span",65),b.Ic(13),b.hc(14,"date"),b.hc(15,"date"),b.Tb(),b.Tb(),b.Ub(16,"span"),b.Ub(17,"a",66),b.Ub(18,"span",67),b.cc("click",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc(3).deleteAttachment(e._id,e.file_url)})),b.Ic(19,"Delete"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.gc().$implicit,e=b.gc(3);b.Cb(2),b.Ec("background-image: url(",e.host_ip,"/uploads/",t.file_url,");background-color: #5a5857;"),b.rc("href","",e.host_ip,"/uploads/",t.file_url,"",b.Ac),b.pc("title",t.file_url),b.Cb(1),b.oc("ngIf","jpg"!=t.fileType&&"gif"!=t.fileType&&"png"!=t.fileType&&"jpeg"!=t.fileType),b.Cb(3),b.Jc(t.file_url),b.Cb(7),b.Lc(" ",b.jc(14,11,t.createdAt,"mediumDate")," at ",b.jc(15,14,t.createdAt,"shortTime"),"")}}function le(t,e){if(1&t&&(b.Ub(0,"div",25),b.Gc(1,se,20,17,"div",1),b.Tb()),2&t){const t=e.$implicit;b.Cb(1),b.oc("ngIf",t.fileType)}}function be(t,e){if(1&t&&(b.Ub(0,"div"),b.Pb(1,"br"),b.Gc(2,le,2,1,"div",56),b.Tb()),2&t){const t=b.gc(2);b.Cb(2),b.oc("ngForOf",t.comments)}}const de=function(t){return{active_tag:t}},me=function(t){return{color:t}};function ge(t,e){if(1&t){const t=b.Vb();b.Ub(0,"span",88),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).changeTage(n)})),b.Ic(1),b.Tb()}if(2&t){const t=e.$implicit,n=b.gc(3);b.oc("ngClass",b.tc(3,de,n.selectionFilter===t.name))("ngStyle",b.tc(5,me,t.color)),b.Cb(1),b.Jc(t.name)}}function pe(t,e){1&t&&(b.Ub(0,"div",89),b.Ic(1,"No Tasks Found..!"),b.Tb())}function ue(t,e){if(1&t&&(b.Ub(0,"span",106),b.Ic(1),b.Tb()),2&t){const t=e.$implicit,n=b.gc(4);b.rc("matTooltip","",t.first_name," ",t.last_name,""),b.Cb(1),b.Jc(n.formateName(t.first_name,t.last_name))}}function he(t,e){if(1&t&&(b.Ub(0,"a",109),b.Ic(1),b.Tb()),2&t){const t=e.$implicit;b.oc("ngStyle",b.tc(2,me,t.color)),b.Cb(1),b.Jc(t.name)}}function fe(t,e){if(1&t&&(b.Ub(0,"div",107),b.Gc(1,he,2,4,"a",108),b.Tb()),2&t){const t=b.gc().$implicit;b.Cb(1),b.oc("ngForOf",t.tags)}}function Ce(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",105),b.cc("click",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc(3).onChangeStatus(e,"status","Pending")})),b.Ub(1,"mat-icon"),b.Ic(2,"check_box"),b.Tb(),b.Ub(3,"span"),b.Ic(4,"Mark as undone"),b.Tb(),b.Tb()}}function _e(t,e){if(1&t){const t=b.Vb();b.Ub(0,"button",105),b.cc("click",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc(3).onChangeStatus(e,"status","Done")})),b.Ub(1,"mat-icon"),b.Ic(2,"check_box_outline_blank"),b.Tb(),b.Ub(3,"span"),b.Ic(4,"Mark as Done"),b.Tb(),b.Tb()}}function ke(t,e){1&t&&(b.Ub(0,"span"),b.Ic(1,"Remove Starred"),b.Tb())}function Te(t,e){1&t&&(b.Ub(0,"span"),b.Ic(1,"Make as Starred"),b.Tb())}function ve(t,e){1&t&&(b.Ub(0,"span"),b.Ic(1,"Remove Priority"),b.Tb())}function Ue(t,e){1&t&&(b.Ub(0,"span"),b.Ic(1,"Mark as Priority"),b.Tb())}function Ie(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-card",90),b.Ub(1,"div",91),b.Ub(2,"div",92),b.Ub(3,"p",93),b.Ic(4),b.Tb(),b.Ub(5,"div",94),b.Ic(6),b.Tb(),b.Ub(7,"div",95),b.Gc(8,ue,2,3,"span",96),b.Ub(9,"span",97),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).openDialog(n,"update")})),b.Ub(10,"a",98),b.Ic(11,"+"),b.Tb(),b.Tb(),b.Gc(12,fe,2,1,"div",99),b.Tb(),b.Tb(),b.Ub(13,"div",100),b.Ub(14,"mat-icon",76),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).onChangeStatus(n,"priority",n.status)})),b.Ic(15,"error_outline"),b.Tb(),b.Ub(16,"mat-icon",73),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).onChangeStatus(n,"starred",n.status)})),b.Ic(17,"star_border"),b.Tb(),b.Ub(18,"button",101),b.Ub(19,"mat-icon"),b.Ic(20,"more_vert"),b.Tb(),b.Tb(),b.Ub(21,"mat-menu",102,103),b.Gc(23,Ce,5,0,"button",104),b.Gc(24,_e,5,0,"button",104),b.Ub(25,"button",105),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).onChangeStatus(n,"starred",n.status)})),b.Ub(26,"mat-icon"),b.Ic(27,"star_border"),b.Tb(),b.Gc(28,ke,2,0,"span",1),b.Gc(29,Te,2,0,"span",1),b.Tb(),b.Ub(30,"button",105),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).onChangeStatus(n,"priority",n.status)})),b.Ub(31,"mat-icon"),b.Ic(32,"error_outline"),b.Tb(),b.Gc(33,ve,2,0,"span",1),b.Gc(34,Ue,2,0,"span",1),b.Tb(),b.Ub(35,"button",105),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc(3).openDialog(n,"info")})),b.Ub(36,"mat-icon"),b.Ic(37,"assignment_late"),b.Tb(),b.Ub(38,"span"),b.Ic(39,"Move to Other"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=e.$implicit,n=b.wc(22);b.Cb(3),b.oc("ngClass","Done"==t.status?"task_done":" "),b.Cb(1),b.Kc(" ",t.task_name,""),b.Cb(1),b.oc("ngClass","Done"==t.status?"task_done":" "),b.Cb(1),b.Jc(t.task_desc),b.Cb(2),b.oc("ngForOf",t.assignedUsers),b.Cb(4),b.oc("ngIf",t.tags),b.Cb(2),b.oc("ngClass",t.task_priority?"priority_true":"priority_false"),b.Cb(2),b.oc("ngClass",t.starred?"starred_true":"starred_false"),b.Cb(2),b.oc("matMenuTriggerFor",n),b.Cb(5),b.oc("ngIf","Done"==t.status),b.Cb(1),b.oc("ngIf","Done"!=t.status),b.Cb(4),b.oc("ngIf",t.starred),b.Cb(1),b.oc("ngIf",!t.starred),b.Cb(4),b.oc("ngIf",t.task_priority),b.Cb(1),b.oc("ngIf",!t.task_priority)}}const Pe=function(t){return{active_filter:t}};function Oe(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",null,69),b.Ub(2,"div",25),b.Ub(3,"div",20),b.Ub(4,"div",70),b.Ub(5,"div",71),b.Ub(6,"div",72),b.Ic(7,"FILTERS"),b.Tb(),b.Ub(8,"mat-nav-list"),b.Ub(9,"mat-list-item",73),b.cc("click",(function(){return b.zc(t),b.gc(2).changeFilter("all")})),b.Ub(10,"mat-icon"),b.Ic(11,"list"),b.Tb(),b.Pb(12,"div",74),b.Ub(13,"div",75),b.Ub(14,"span"),b.Ic(15,"All"),b.Tb(),b.Tb(),b.Tb(),b.Ub(16,"mat-list-item",73),b.cc("click",(function(){return b.zc(t),b.gc(2).changeFilter("Starred")})),b.Ub(17,"mat-icon"),b.Ic(18,"star_border"),b.Tb(),b.Pb(19,"div",74),b.Ub(20,"div",75),b.Ub(21,"span"),b.Ic(22,"Starred"),b.Tb(),b.Tb(),b.Tb(),b.Ub(23,"mat-list-item",76),b.cc("click",(function(){return b.zc(t),b.gc(2).changeFilter("Priority")})),b.Ub(24,"mat-icon"),b.Ic(25,"error"),b.Tb(),b.Pb(26,"div",74),b.Ub(27,"div",75),b.Ub(28,"span"),b.Ic(29,"Priority"),b.Tb(),b.Tb(),b.Tb(),b.Ub(30,"mat-list-item",77),b.cc("click",(function(){return b.zc(t),b.gc(2).changeFilter("Sheduled")})),b.Ub(31,"mat-icon"),b.Ic(32,"schedule"),b.Tb(),b.Pb(33,"div",74),b.Ub(34,"div",75),b.Ub(35,"span"),b.Ic(36,"Sheduled"),b.Tb(),b.Tb(),b.Tb(),b.Ub(37,"mat-list-item",78),b.cc("click",(function(){return b.zc(t),b.gc(2).changeFilter("Today")})),b.Ub(38,"mat-icon"),b.Ic(39,"today"),b.Tb(),b.Pb(40,"div",74),b.Ub(41,"div",75),b.Ub(42,"span"),b.Ic(43,"Today"),b.Tb(),b.Tb(),b.Tb(),b.Ub(44,"mat-list-item",79),b.cc("click",(function(){return b.zc(t),b.gc(2).changeFilter("Done")})),b.Ub(45,"mat-icon"),b.Ic(46,"done"),b.Tb(),b.Pb(47,"div",74),b.Ub(48,"div",75),b.Ub(49,"span"),b.Ic(50,"Done"),b.Tb(),b.Tb(),b.Tb(),b.Ub(51,"mat-list-item",80),b.cc("click",(function(){return b.zc(t),b.gc(2).changeFilter("Deleted")})),b.Ub(52,"mat-icon"),b.Ic(53,"delete"),b.Tb(),b.Pb(54,"div",74),b.Ub(55,"div",75),b.Ub(56,"span"),b.Ic(57,"Deleted"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(58,"div",81),b.Ub(59,"div",82),b.Ub(60,"a"),b.Gc(61,ge,2,7,"span",83),b.Tb(),b.Ub(62,"button",84),b.cc("click",(function(){b.zc(t);const e=b.gc(2);return e.openDialog(e.ticket,"add")})),b.Ub(63,"mat-icon"),b.Ic(64,"add"),b.Tb(),b.Tb(),b.Tb(),b.Ub(65,"div",85),b.Gc(66,pe,2,0,"div",86),b.Gc(67,Ie,40,15,"mat-card",87),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=b.gc(2);b.Cb(9),b.oc("ngClass",b.tc(10,Pe,"all"===t.selectionFilter)),b.Cb(7),b.oc("ngClass",b.tc(12,Pe,"Starred"===t.selectionFilter)),b.Cb(7),b.oc("ngClass",b.tc(14,Pe,"Priority"===t.selectionFilter)),b.Cb(7),b.oc("ngClass",b.tc(16,Pe,"Sheduled"===t.selectionFilter)),b.Cb(7),b.oc("ngClass",b.tc(18,Pe,"Today"===t.selectionFilter)),b.Cb(7),b.oc("ngClass",b.tc(20,Pe,"Done"===t.selectionFilter)),b.Cb(7),b.oc("ngClass",b.tc(22,Pe,"Deleted"===t.selectionFilter)),b.Cb(10),b.oc("ngForOf",t.tags),b.Cb(5),b.oc("ngIf",t.tasks.length<=0),b.Cb(1),b.oc("ngForOf",t.tasks)}}const xe=function(t){return{tab_btn_active:t}};function Me(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div"),b.Ub(1,"div",3),b.Ub(2,"div"),b.Ub(3,"button",4),b.cc("click",(function(){return b.zc(t),b.gc().close()})),b.Ub(4,"mat-icon"),b.Ic(5,"close"),b.Tb(),b.Tb(),b.Tb(),b.Ub(6,"div",5),b.Ub(7,"mat-icon"),b.Ic(8,"subtitles"),b.Tb(),b.Ic(9),b.Tb(),b.Ub(10,"div",6),b.Ub(11,"div",7),b.Ub(12,"button",8),b.cc("click",(function(){return b.zc(t),b.gc().viewPage("comments")})),b.Ub(13,"mat-icon",9),b.Ic(14,"chat"),b.Tb(),b.Ic(15," Comments"),b.Tb(),b.Tb(),b.Ub(16,"div",7),b.Ub(17,"button",8),b.cc("click",(function(){return b.zc(t),b.gc().viewPage("attachments")})),b.Ub(18,"mat-icon",9),b.Ic(19,"attachment"),b.Tb(),b.Ic(20," Attachments"),b.Tb(),b.Tb(),b.Ub(21,"div",7),b.Ub(22,"button",8),b.cc("click",(function(){return b.zc(t),b.gc().viewPage("tasks")})),b.Ub(23,"mat-icon",9),b.Ic(24,"list"),b.Tb(),b.Ic(25," Tasks"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(26,"div",10),b.Ub(27,"div"),b.Ub(28,"mat-chip-list",null,11),b.Ub(30,"button",12),b.Ub(31,"mat-icon",9),b.Ic(32,"group"),b.Tb(),b.Tb(),b.Gc(33,Yt,3,4,"mat-chip",13),b.Gc(34,Wt,3,3,"mat-chip",14),b.Tb(),b.Tb(),b.Gc(35,ce,38,7,"div",1),b.Gc(36,be,3,1,"div",1),b.Gc(37,Oe,68,24,"div",1),b.Tb(),b.Tb()}if(2&t){const t=b.gc();b.Cb(9),b.Kc(" ",t.ticket.ticket_name," "),b.Cb(3),b.oc("ngClass",b.tc(9,xe,"comments"===t.viewpage)),b.Cb(5),b.oc("ngClass",b.tc(11,xe,"attachments"===t.viewpage)),b.Cb(5),b.oc("ngClass",b.tc(13,xe,"tasks"===t.viewpage)),b.Cb(11),b.oc("ngForOf",t.ticket.projectId.assignedUsers),b.Cb(1),b.oc("ngIf",t.clearFilter&&"tasks"==t.viewpage),b.Cb(1),b.oc("ngIf","comments"===t.viewpage),b.Cb(1),b.oc("ngIf","attachments"===t.viewpage),b.Cb(1),b.oc("ngIf","tasks"===t.viewpage)}}let we=(()=>{class t{constructor(t,e,n,i,a,c,r,l){this.ticketsService=t,this.commentService=e,this.projectsService=n,this.taskService=i,this._snackBar=a,this.dialogRef=c,this.dialog=r,this.ticket=[],this.comments=[],this.tasks=[],this.data=[],this.viewpage="tasks",this.isLoading=!0,this.host_ip=g.a.ip,this.visible=!1,this.isEdit=!1,this.selectable=!0,this.removable=!0,this.selectionFilter="all",this.editable=!0,this.selectedFiles=[],this.attachment=[],this.editSingleTaskForm={task_name:"",assignedUsers:[],id:""},this.commentDataForm={comment:"",assignedUsers:[],id:""},this.separatorKeysCodes=[s.g,s.c],this.fruitCtrl=new o.d,this.isLoadingComments=!1,this.perPage=50,this.currentPage=1,this.Count=0,this.searchUser=[],this.assignedUsers=[],this.clearFilter=!1,this.sizeOptions=[10,20,50],this.sankBardata={},this.horizontalPos="right",this.verticalPos="top",this.taskList=["To Do","Inprogress","Done","Closed"],this.tags=[{color:"#49b560",name:"Frontend"},{color:"#f44336",name:"Backend"},{color:"#ffb300",name:"API"},{color:"#0729ca",name:"Issue"},{color:"#d700ff",name:"Mobile"},{color:"#009cb5",name:"future"},{color:"#000",name:"Other"}],this.data=l,this.userId=this.commentService.getUserId(),this.viewpage="comments"}ngOnInit(){this.isLoading=!0,this.ticketsService.getTicketById(this.data.tid).subscribe(t=>{this.ticket=t.data[0],this.isLoading=!1,this.getComments()})}getComments(){this.commentService.getCommentsByTicketId(this.perPage,this.currentPage,this.search,this.data.tid).subscribe(t=>{this.comments=t.data})}selectFile(t){this.selectedFiles=t.target.files[0],console.log(this.selectedFiles),this.selectedFileName=this.selectedFiles.name,this.fileType=this.selectedFiles.name.split(".")[1]}deleteAttachment(t,e){console.log(t,e),this.commentService.deleteFile(t,e).subscribe(t=>{this.comments=t.data,this.getComments()})}changeFilter(t){this.selectionFilter=t,this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:null,filter:t}).subscribe(t=>{this.tasks=t.data})}changeTage(t){this.selectionFilter=t.name,this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:null,filter:null,tage:t.name}).subscribe(t=>{this.tasks=t.data})}getTasks(){this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:null,filter:null,tage:null}).subscribe(t=>{this.tasks=t.data})}viewPage(t){this.viewpage=t,"comments"==t?this.getComments():"attachments"==t?this.getTasks():"tasks"==t&&this.getTasks()}assignUsers(t){this.visible=!t}onComment(t){let e={};e.comment=t.value.comment,e.pid=this.ticket.projectId._id,e.tid=this.ticket._id,e.file=this.selectedFiles,e.filename=this.selectedFiles.name,e.fileType=this.fileType,this.commentService.addComment(e).subscribe(e=>{this.selectedFileName="",this.selectedFiles=[],this.fileType="",this.getComments(),t.reset()})}searchUsers(t){if(t){var e=this.ticket.projectId.assignedUsers.filter(e=>e.first_name.toLowerCase().includes(t)||e.last_name.toLowerCase().includes(t));console.log(e),this.searchUser=e}}displayFn(t){return t?t.first_name+" "+t.last_name:""}onSelection(t){const e=t.option.value;let n=this.assignedUsers.findIndex(t=>t._id===e._id);console.log(n,e),-1==n?(this.assignedUsers.push(t.option.value),this.assigneeInput.nativeElement.value="",this.fruitCtrl.setValue(null)):(this.sankBardata.message="User Allready Exist in this Task.",this.openSnakBar(),this.fruitCtrl.setValue(null))}selected(t){this.assignedUsers.push(t.option.viewValue),this.assignedUsers.nativeElement.value="",this.assignedUsers.setValue(null)}remove(t){const e=this.assignedUsers.indexOf(t);e>=0&&this.assignedUsers.splice(e,1)}onCreateTask(t){this.editSingleTaskForm.assignedUsers=this.assignedUsers,this.taskService.updateTask(this.editSingleTaskForm).subscribe(t=>{this.editSingleTaskForm={task_name:"",assignedUsers:[],id:""},this.assignedUsers=[],this.visible=!1,this.getTasks()})}close(){this.dialogRef.close()}filter(t){this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:t._id}).subscribe(t=>{this.tasks=t.data,this.clearFilter=!0})}removeFilter(){this.clearFilter=!1,this.getTasks()}openSnakBar(){let t=new l.b;t.verticalPosition=this.verticalPos,t.horizontalPosition=this.horizontalPos,t.duration=8e3,this._snackBar.open(this.sankBardata.message,"Ok",t)}formateName(t,e){return t.charAt(0).toUpperCase()+e.charAt(0).toUpperCase()}editTask(t){console.log(t),this.editSingleTaskForm=t,this.isEdit=!0}onEdit(t,e){console.log(t,e.target.innerText,"000000"),t.task_name=e.target.innerText,this.taskService.updateTask(t).subscribe(t=>{this.assignedUsers=[],this.sankBardata.message="Task Updated.",this.openSnakBar(),this.visible=!1,this.getTasks()})}onChangeStatus(t,e,n){let i={id:t._id};console.log(t,n,e),"priority"==e?(i.task_priority=!t.task_priority,i.status=t.status,i.starred=t.starred):"starred"==e?(i.starred=!t.starred,i.task_priority=t.task_priority,i.status=t.status):(i.starred=t.starred,i.status=n,i.task_priority=t.task_priority),this.taskService.updateTaskStatus(i).subscribe(t=>{this.getTasks()})}openDialog(t,e){const n=new r.e;n.disableClose=!1,n.autoFocus=!0,n.width="620px",n.backdropClass="background-color:#000",n.data={task:t,mode:e},this.dialog.open(Rt,n).afterClosed().subscribe(t=>{this.getTasks()})}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(ot),b.Ob(_t),b.Ob(C),b.Ob(Tt),b.Ob(l.a),b.Ob(r.h),b.Ob(r.b),b.Ob(r.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-comments"]],viewQuery:function(t,e){var n;1&t&&(b.Nc(qt,!0),b.Nc(Jt,!0)),2&t&&(b.vc(n=b.dc())&&(e.assigneeInput=n.first),b.vc(n=b.dc())&&(e.matAutocomplete=n.first))},decls:2,vars:2,consts:[["class","example-margin","mode","indeterminate","diameter","40","value","20",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","diameter","40","value","20",1,"example-margin"],["mat-dialog-title",""],["matDialogClose","","mat-mini-fab","",2,"float","right",3,"click"],[2,"font-size","19px"],[1,"row",2,"text-align","center"],[1,"col-md-4","col-sm-12"],["mat-button","",1,"tab_btn",3,"ngClass","click"],["md-list-icon",""],["mat-dialog-content","",1,"font"],["chipList",""],["mat-button","","matTooltip","Assigned Users"],[3,"matTooltip","click",4,"ngFor","ngForOf"],["style","width:70px;",3,"selectable","removable","removed",4,"ngIf"],[3,"matTooltip","click"],[1,"formate_chip"],[2,"width","70px",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"row"],[1,"col-md-2"],[1,"mat_label"],[1,"col-md-10"],[1,"mat-desc"],[1,"container"],[3,"submit"],["commentForm","ngForm"],[1,"col-md-9"],["appearance","outline"],["matInput","","name","comment","type","text","placeholder","Write Comment Here ...","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["matSuffix",""],[1,"col-md-3",2,"text-align","left"],["type","file",2,"width","40px",3,"change"],["filePicker",""],["mat-stroked-button","",1,"comment_btn",3,"click"],["matTooltip","Attachment","matSuffix",""],["mat-stroked-button","","color","primary",1,"comment_btn",3,"disabled"],["matTooltip","Save Your Comment","type","submit","matSuffix",""],["class","file_name",3,"matTooltip",4,"ngIf"],["class","example-margin","mode","indeterminate","diameter","20","value","20",4,"ngIf"],[1,"file_name",3,"matTooltip"],["mode","indeterminate","diameter","20","value","20",1,"example-margin"],[4,"ngFor","ngForOf"],["class","msj macro",4,"ngIf"],["class","msj-rta macro",4,"ngIf"],[1,"msj","macro"],[1,"text","text-l"],[1,"img-circle",3,"matTooltip"],[1,"msj-rta","macro"],[1,"text","text-r"],[1,"img-circle",2,"float","right","padding","5px",3,"matTooltip"],["target","_blank",3,"matTooltip","href",4,"ngIf"],["target","_blank",3,"matTooltip","href"],["md-list-icon","",2,"font-size","16px","float","left"],["class","container",4,"ngFor","ngForOf"],[1,"attachment-thumbnail"],["target","_blank",1,"attachment-thumbnail-preview","js-open-viewer","attachment-thumbnail-preview-is-cover",3,"href","title"],["class","file_type",4,"ngIf"],[1,"attachment-thumbnail-details","js-open-viewer"],[1,"attachment-thumbnail-name"],["href","","target","_blank","rel","noreferrer nofollow noopener",1,"attachment-thumbnail-details-title-action","dark-hover","js-attachment-action","js-direct-link"],[1,"icon-sm","icon-external-link"],[1,"u-block","quiet","attachment-thumbnail-details-title-options"],["dt","2020-01-08T10:23:41.360Z","title","January 8, 2020 3:50 PM",1,"date"],[1,"attachment-thumbnail-details-title-options-item","dark-hover","js-confirm-delete"],["mat-button","",1,"del_att",3,"click"],[1,"file_type"],["top",""],[1,"side_nav_filter"],[2,"background-color","#eaeaea","height","100%","border-radius","7px"],[2,"padding","0px 15px 0px 18px"],["matTooltip","Starred",3,"ngClass","click"],["fxFlex","10"],[1,"sidenav-item"],["matTooltip","Priority",3,"ngClass","click"],["matTooltip","Sheduled",3,"ngClass","click"],["matTooltip","Today",3,"ngClass","click"],["matTooltip","Done",3,"ngClass","click"],["matTooltip","Deleted",3,"ngClass","click"],[1,"side_nav_content"],["matTooltip","Tags",1,"tags"],["class","tag",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],["matTooltip","Add New Task","mat-mini-fab","",2,"float","right",3,"click"],[2,"max-height","310px","overflow-y","scroll","height","310px"],["style","text-align: center;",4,"ngIf"],["class","task_matcard",4,"ngFor","ngForOf"],[1,"tag",3,"ngClass","ngStyle","click"],[2,"text-align","center"],[1,"task_matcard"],[1,"task_task"],[2,"flex","1 1 0%","box-sizing","border-box"],[2,"font-size","15px","font-weight","600",3,"ngClass"],[2,"margin-top","4px",3,"ngClass"],[2,"padding","11px 0px 3px 0px"],["class","name_circle",3,"matTooltip",4,"ngFor","ngForOf"],["matTooltip","Add New User",3,"click"],[2,"font-size","12px"],["class","tags","style","flex-flow: row wrap; box-sizing: border-box; display: flex; place-content: center flex-start; align-items: center;",4,"ngIf"],[1,"task_tags"],["matTooltip","Change Task Status (or) Move","mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"name_circle",3,"matTooltip"],[1,"tags",2,"flex-flow","row wrap","box-sizing","border-box","display","flex","place-content","center flex-start","align-items","center"],["class","tag",3,"ngStyle",4,"ngFor","ngForOf"],[1,"tag",3,"ngStyle"]],template:function(t,e){1&t&&(b.Gc(0,Kt,1,0,"mat-progress-spinner",0),b.Gc(1,Me,38,15,"div",1)),2&t&&(b.oc("ngIf",e.isLoading),b.Cb(1),b.oc("ngIf",!e.isLoading))},directives:[i.l,J.a,r.i,v.b,r.d,U.a,i.j,r.f,I.b,q.a,i.k,I.a,I.c,_.f,o.v,o.n,o.o,_.b,k.b,o.b,o.t,o.m,o.p,_.g,v.a,_.a,Nt.c,Nt.a,i.m,V.a,Vt.c,Vt.d,Vt.a],pipes:[i.e],styles:['.form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%]{background-color:#fff;color:#f89b46}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]:hover, .mat-raised-button.mat-accent[_ngcontent-%COMP%]{background-color:#f89b46;color:#fff}.mat-button.mat-primary[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff;color:#f89b46}.mat-button.mat-primary[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]:hover{background-color:#f89b46;color:#fff}.comment_btn[_ngcontent-%COMP%]{border-radius:17px}body[_ngcontent-%COMP%]{font:12px/1.5 PT Sans,serif;margin:25px}.tags[_ngcontent-%COMP%]{list-style:none;margin:0;overflow:hidden;padding:10px}.tags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0;position:relative}.side_nav_filter[_ngcontent-%COMP%]{width:185px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:710px}.active_filter[_ngcontent-%COMP%], .active_tag[_ngcontent-%COMP%]{background-color:#eee}.priority_true[_ngcontent-%COMP%]{color:red!important}.priority_false[_ngcontent-%COMP%]{color:#000!important}.starred_true[_ngcontent-%COMP%]{color:#ffc107!important}.starred_false[_ngcontent-%COMP%]{color:#000!important}.tag[_ngcontent-%COMP%]{background:#eee;border-radius:3px 0 0 3px;color:#000;display:inline-block;height:26px;line-height:26px;padding:0 15px 0 18px;position:relative;margin:0 4px 0 0;text-decoration:none}.tag[_ngcontent-%COMP%]:before{border-radius:10px;box-shadow:inset 0 1px rgba(0,0,0,.25);height:6px;left:10px;width:6px;top:10px}.tag[_ngcontent-%COMP%]:after, .tag[_ngcontent-%COMP%]:before{background:#fff;content:"";position:absolute}.tag[_ngcontent-%COMP%]:after{border-bottom:13px solid transparent;border-left:10px solid #eee;border-top:13px solid transparent;right:0;top:0}.task_done[_ngcontent-%COMP%]{text-decoration:line-through}.tag[_ngcontent-%COMP%]:hover{background-color:#fff;color:#fff}.tag[_ngcontent-%COMP%]:hover:after{border-left-color:#fff}.task_matcard[_ngcontent-%COMP%]{display:block;background-color:#fff;position:relative;padding:16px 16px 0 8px;border-bottom:1px solid;text-transform:none;cursor:pointer;flex-shrink:0}mat-list-item[_ngcontent-%COMP%]{border-radius:25px!important;margin:1px}.task_tages[_ngcontent-%COMP%]{flex-direction:row}.task_tages[_ngcontent-%COMP%], .task_task[_ngcontent-%COMP%]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;box-sizing:border-box;display:-webkit-box;display:flex;place-content:center flex-start;-webkit-box-align:center;align-items:center}.task_task[_ngcontent-%COMP%]{flex-direction:row;-webkit-box-flex:1;flex:1 1 0%}.sidenav-item[_ngcontent-%COMP%]{padding:15px;font-size:15px}.msg_send_btn[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border:none;border-radius:50%;color:#fff;cursor:pointer;font-size:17px;height:33px;position:absolute;right:0;top:11px;width:33px}.mat-desc[_ngcontent-%COMP%]{font:400 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:inherit}.mat_label[_ngcontent-%COMP%]{font-weight:500;font-size:18px}.avatar_l[_ngcontent-%COMP%]{justify-content:left}.avatar_l[_ngcontent-%COMP%], .avatar_r[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;-webkit-box-align:center;align-items:center;width:25%;float:left;padding-right:10px}.avatar_r[_ngcontent-%COMP%]{justify-content:flex-end}.mytext[_ngcontent-%COMP%]{border:0;padding:10px;background:#f5f5f5}.text[_ngcontent-%COMP%]{width:100%;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:first-of-type{width:100%;margin-top:0;margin-bottom:auto;line-height:13px;font-size:14px}.text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-of-type{width:100%;text-align:right;color:silver;margin-bottom:-7px;margin-top:auto}.text-l[_ngcontent-%COMP%]{float:left;padding-right:10px}.text-r[_ngcontent-%COMP%]{float:right;padding-left:10px}.avatar[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;width:25%;float:left;padding-right:10px}.avatar[_ngcontent-%COMP%], .macro[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.macro[_ngcontent-%COMP%]{margin-top:5px;width:65%;border-radius:5px;padding:5px}.msj-rta[_ngcontent-%COMP%]{float:right;background:#e0e0de}.msj[_ngcontent-%COMP%]{float:left;background:#fbe8d6}.frame[_ngcontent-%COMP%]{background:#e0e0de;height:450px;overflow:hidden;padding:0}.frame[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{position:absolute;bottom:0;width:100%;display:-webkit-box;display:flex}.small[_ngcontent-%COMP%], small[_ngcontent-%COMP%]{font-size:90%;font-weight:500;color:#000}.msj[_ngcontent-%COMP%]:before{left:-14px;border-color:transparent #fbe8d6 transparent transparent;border-width:0 13px 13px 0}.msj-rta[_ngcontent-%COMP%]:after, .msj[_ngcontent-%COMP%]:before{width:0;height:0;content:"";top:-5px;position:relative;border-style:solid}.msj-rta[_ngcontent-%COMP%]:after{left:15px;border-color:#e0e0de transparent transparent;border-width:13px 13px 0 0}input[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#d4d4d4}[_ngcontent-%COMP%]::-moz-placeholder{color:#d4d4d4}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#d4d4d4}[_ngcontent-%COMP%]:-moz-placeholder{color:#d4d4d4}.mat-chip[_ngcontent-%COMP%], .mat-chip-ripple[_ngcontent-%COMP%]{white-space:nowrap;width:113px;overflow:hidden;text-overflow:ellipsis}.formate_chip[_ngcontent-%COMP%]{white-space:nowrap!important;width:100px!important;overflow:hidden!important;text-overflow:ellipsis!important}.btn_list[_ngcontent-%COMP%]{width:15%;margin:6px 15px 1px 11px;border:.6px solid #000}.ribbon[_ngcontent-%COMP%]{width:0;height:0;content:"";top:-5px;left:15px;position:relative;border-color:#e0e0de transparent transparent;border-style:solid;border-width:13px 13px 0 0}.img-circle[_ngcontent-%COMP%]{padding:7px}.img-circle[_ngcontent-%COMP%], .img-circle1[_ngcontent-%COMP%]{background-color:#fdfdfd;width:30px;font-weight:800;height:30px;border-radius:14px;text-align:center}.img-circle1[_ngcontent-%COMP%]{padding:5px}.task_card[_ngcontent-%COMP%]{margin:5px 48px;background:#eceaea;min-height:auto;height:50px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item.mat-3-line[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option.mat-3-line[_ngcontent-%COMP%]{border:1px solid #b7b6b6;height:88px;background:#fff;top:6px;margin:0 0 8px 2px;border-radius:10px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%]:hover{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-align:center;align-items:center;box-sizing:border-box;padding:0 16px;background:#e0e0de;position:relative;height:inherit}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.btn[_ngcontent-%COMP%]{cursor:pointer}.full-width[_ngcontent-%COMP%]{width:80%;margin-top:20px}.example-spacer[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto}.todoitem[_ngcontent-%COMP%]{margin:5px 0;color:#171717;text-overflow:ellipsis;border-radius:8px}.done-true[_ngcontent-%COMP%]{-webkit-text-decoration:line-through #d50000;text-decoration:line-through #d50000}.done-false[_ngcontent-%COMP%]{text-decoration:none}section[_ngcontent-%COMP%]{display:table;margin:8px}.example-label[_ngcontent-%COMP%]{font-size:14px;margin-left:8px;width:120px}.example-button-row[_ngcontent-%COMP%], .example-label[_ngcontent-%COMP%]{display:table-cell}.example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:table-cell;margin-right:8px}.example-flex-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;width:480px}.example-button-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;width:120px}.name_circle[_ngcontent-%COMP%]{padding:9px;background:#a9a9a9;color:#000;font:10px Arial,sans-serif}.name_circle[_ngcontent-%COMP%], .name_circle[_ngcontent-%COMP%]:hover{border-radius:50%;text-align:center}.name_circle[_ngcontent-%COMP%]:hover{padding:10px;background:#fff;color:#f89b46;font:11px Arial,sans-serif}.attachment-thumbnail[_ngcontent-%COMP%]{border-radius:3px;min-height:80px;margin:0 0 8px;overflow:hidden;position:relative}.attachment-thumbnail-preview[_ngcontent-%COMP%]{background-color:rgba(9,30,66,.04);background-position:50%;background-size:contain;background-repeat:no-repeat;border-radius:3px;height:80px;margin-top:-40px;position:absolute;top:50%;left:0;text-align:center;text-decoration:none;z-index:1;width:112px}.attachment-thumbnail-details[_ngcontent-%COMP%]{box-sizing:border-box;cursor:pointer;padding:8px 8px 8px 128px;min-height:80px;margin:0;z-index:0}pre[_ngcontent-%COMP%]{white-space:pre-wrap;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:15px;line-height:20px;color:#000;font-weight:500}.tab_btn[_ngcontent-%COMP%]{width:100%;color:#af9c9c}.file_type[_ngcontent-%COMP%]{font-size:27px;color:#fff;margin-top:15px!important}.tab_btn_active[_ngcontent-%COMP%]{width:100%;background-color:#dedede}.del_att[_ngcontent-%COMP%]{color:#fff;border:.1px solid;background:#e99446;border-radius:7px;padding:4px;margin:8px}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.attachment-thumbnail-details[_ngcontent-%COMP%]   .attachment-thumbnail-name[_ngcontent-%COMP%]{font-weight:700;word-wrap:break-word}.attachment-thumbnail-details-title-action[_ngcontent-%COMP%]{padding-left:3px}.attachment-thumbnail-details-title-options[_ngcontent-%COMP%]{margin-bottom:8px}.file_name[_ngcontent-%COMP%]{white-space:nowrap;width:200px;overflow:hidden;text-overflow:ellipsis}@media (min-width:1025px) and (max-width:1280px){.side_nav_filter[_ngcontent-%COMP%]{width:185px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:722px}}@media (min-width:768px) and (max-width:1024px){.side_nav_filter[_ngcontent-%COMP%]{width:150px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:600px}}@media (min-width:767px) and (max-width:1023px) and (orientation:landscape){.side_nav_filter[_ngcontent-%COMP%]{width:130px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:430px}}']}),t})();var ye=n("qb46"),je=n("+0xr"),Se=n("LPYB");function ze(t,e){if(1&t&&(b.Ub(0,"div"),b.Pb(1,"canvas",28),b.Tb()),2&t){const t=b.gc();b.Cb(1),b.oc("datasets",t.ChartData)("labels",t.Labels)("options",t.ChartOptions)("legend",t.ChartLegend)("chartType",t.ChartType)}}function Fe(t,e){1&t&&(b.Ub(0,"th",29),b.Ic(1," Ticket "),b.Tb())}function De(t,e){if(1&t&&(b.Ub(0,"td",30),b.Ic(1),b.Tb()),2&t){const t=e.$implicit;b.pc("matTooltip",t.ticket_name),b.Cb(1),b.Kc(" ",t.ticket_name," ")}}function Ge(t,e){1&t&&(b.Ub(0,"th",31),b.Ic(1," Created At "),b.Tb())}function Le(t,e){if(1&t&&(b.Ub(0,"td",30),b.hc(1,"date"),b.Ic(2),b.hc(3,"date"),b.Tb()),2&t){const t=e.$implicit;b.qc("matTooltip","Last Updated By ",b.jc(1,2,t.updatedAt,"medium"),""),b.Cb(2),b.Kc(" ",b.jc(3,5,t.createdAt,"medium")," ")}}function Ae(t,e){1&t&&(b.Ub(0,"th",31),b.Ic(1,"Status "),b.Tb())}function $e(t,e){if(1&t&&(b.Ub(0,"mat-option",37),b.Ic(1),b.Tb()),2&t){const t=e.$implicit;b.oc("value",t),b.Cb(1),b.Kc(" ",t," ")}}function Be(t,e){if(1&t){const t=b.Vb();b.Ub(0,"td",32),b.Ub(1,"mat-form-field",33),b.Ub(2,"mat-label"),b.Ic(3,"Ticket Status"),b.Tb(),b.Ub(4,"mat-select",34,35),b.cc("selectionChange",(function(){b.zc(t);const n=e.$implicit,i=b.wc(5);return b.gc().onChangeStatus("status",i.value,n._id,n.ticket_priority)})),b.Gc(6,$e,2,2,"mat-option",36),b.Tb(),b.Tb(),b.Tb()}if(2&t){const t=e.$implicit,n=b.gc();b.Cb(4),b.pc("value",t.status),b.Cb(2),b.oc("ngForOf",n.ticket_status)}}function Ee(t,e){1&t&&(b.Ub(0,"th",38),b.Ic(1,"Action "),b.Tb())}function Re(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-icon",44),b.cc("click",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc().openDialog(e._id,"edit")})),b.Ic(1,"edit"),b.Tb()}}function Ne(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-icon",45),b.cc("click",(function(){b.zc(t);const e=b.gc().$implicit;return b.gc().onDelete(e._id)})),b.Ic(1,"delete"),b.Tb()}}function Ve(t,e){if(1&t){const t=b.Vb();b.Ub(0,"td",39),b.Gc(1,Re,2,0,"mat-icon",40),b.Gc(2,Ne,2,0,"mat-icon",41),b.Ub(3,"mat-icon",42),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc().ticketInfoDialog(n._id)})),b.Ic(4,"info"),b.Tb(),b.Ub(5,"mat-icon",43),b.cc("click",(function(){b.zc(t);const n=e.$implicit;return b.gc().commentsDialog(n.projectId._id,n._id)})),b.Ic(6,"chat"),b.Tb(),b.Tb()}if(2&t){const t=b.gc();b.Cb(1),b.oc("ngIf",3!=t.userData.role),b.Cb(1),b.oc("ngIf",3!=t.userData.role)}}function qe(t,e){1&t&&b.Pb(0,"tr",46)}function Je(t,e){1&t&&b.Pb(0,"tr",47)}function Ke(t,e){1&t&&b.Pb(0,"mat-progress-spinner",48)}function Ye(t,e){1&t&&(b.Ub(0,"p",49),b.Ic(1,"No Tickets Found!"),b.Tb())}function He(t,e){if(1&t){const t=b.Vb();b.Ub(0,"mat-paginator",50),b.cc("page",(function(e){return b.zc(t),b.gc().onChangedPage(e)})),b.Tb()}if(2&t){const t=b.gc();b.oc("length",t.Count)("pageSize",t.perPage)("pageSizeOptions",t.sizeOptions)}}const We=[{path:"projects",component:nt},{path:"tickets/:pid",component:(()=>{class t{constructor(t,e,n,i,a){this.ticketsService=t,this.activatedRoute=e,this.dialog=n,this.projectsService=i,this.router=a,this.tickets=[],this.isLoading=!1,this.perPage=10,this.currentPage=1,this.Count=0,this.projectData=[],this.sizeOptions=[10,20,50],this.ticket_priority=["High","Medium","Low"],this.ticket_status=["New","Pending","Done","Closed"],this.displayedColumns1=["Ticket","Created At","Status","Action"],this.ChartData=[{data:[0,0,0,0,0],label:"Tages",lineTension:6,pointRadius:[4,4,4,4],borderWidth:2}],this.Labels=["Frontend","Backend","API","Issue","Mobile"],this.ChartOptions={responsive:!0,tooltips:{enabled:!0},plugins:{datalabels:{anchor:"top",align:"top",font:{size:12}}}},this.barChartPlugins=[ye],this.ChartLegend=!0,this.ChartType="doughnut",this.activatedRoute.paramMap.subscribe(t=>{this.pid=t.get("pid")})}ngOnInit(){this.isLoading=!0,this.userData=this.ticketsService.getUserData(),this.projectsService.getProjectById(this.pid).subscribe(t=>{this.projectData=t.data[0],this.ticketsService.getTicketsByProjectId(this.perPage,this.currentPage,this.search,this.pid).subscribe(t=>{this.tickets=t.data,this.Count=t.count,this.ticketsService.getTicketTages(this.pid).subscribe(t=>{this.ChartData[0].data=t.data,this.isLoading=!1})})})}onDelete(t){this.ticketsService.deleteTicket(t).subscribe(t=>{this.ngOnInit()})}onSearch(){this.ngOnInit()}onChangedPage(t){this.isLoading=!0,this.currentPage=t.pageIndex+1,this.perPage=t.pageSize,this.ngOnInit()}onChangeStatus(t,e,n,i){let a={id:n};"priority"==t?(a.status=i,a.ticket_priority=e,this.ticketsService.updateTicketStatus(a).subscribe(t=>{this.ngOnInit()})):"status"==t&&(a.ticket_priority=i,a.status=e,this.ticketsService.updateTicketStatus(a).subscribe(t=>{this.ngOnInit()}))}openDialog(t,e){const n=new r.e;n.disableClose=!0,n.autoFocus=!0,n.data={id:t,pid:this.pid,mode:e},this.dialog.open(gt,n).afterClosed().subscribe(t=>{this.ngOnInit()})}ticketInfoDialog(t){const e=new r.e;e.disableClose=!1,e.autoFocus=!0,e.width="598px",e.data={id:t},this.dialog.open(ft,e).afterClosed().subscribe(t=>{this.ngOnInit()})}commentsDialog(t,e){const n=new r.e;n.disableClose=!1,n.autoFocus=!0,n.width="962px",n.minHeight="563px",n.data={pid:t,tid:e},this.dialog.open(we,n).afterClosed().subscribe(t=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(ot),b.Ob(c.a),b.Ob(r.b),b.Ob(C),b.Ob(c.b))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-tickets"]],decls:38,vars:8,consts:[[1,"card-container"],[1,"container"],[1,"row"],[1,"col-md-6",2,"background-color","#fafafa"],[4,"ngIf"],[1,"col-md-6"],["action","#","autocomplete","off"],[2,"width","45%"],["matInput","","name","name","type","text","placeholder","Search",3,"ngModel","ngModelChange","keyup"],["nameInput","ngModel"],["md-list-icon",""],[1,"btn","btn-success","float-right",3,"click"],["mat-table","",1,"mat-elevation-z8","table-striped",3,"dataSource"],["matColumnDef","Ticket"],["mat-header-cell","","style","width:50%",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","Created At"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","Status"],["mat-cell","",4,"matCellDef"],["matColumnDef","Action"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","example-margin","mode","indeterminate","diameter","40","value","20",4,"ngIf"],["class","info-text mat-body-1",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["baseChart","","width","800","height","200",3,"datasets","labels","options","legend","chartType"],["mat-header-cell","",2,"width","50%"],["mat-cell","",3,"matTooltip"],["mat-header-cell",""],["mat-cell",""],["appearance","outline",1,"status_cus"],["name","status","placeholder","Select Status",3,"value","selectionChange"],["ticketSInput",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["color","primary","md-list-icon","",3,"click",4,"ngIf"],["color","warn","matTooltip","Delete Category","md-list-icon","",3,"click",4,"ngIf"],["md-list-icon","","matTooltip","Ticket Info",3,"click"],["md-list-icon","","color","accent","matTooltip","Comments / Chat",3,"click"],["color","primary","md-list-icon","",3,"click"],["color","warn","matTooltip","Delete Category","md-list-icon","",3,"click"],["mat-header-row",""],["mat-row",""],["mode","indeterminate","diameter","40","value","20",1,"example-margin"],[1,"info-text","mat-body-1"],[3,"length","pageSize","pageSizeOptions","page"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"div",3),b.Gc(4,ze,2,5,"div",4),b.Tb(),b.Ub(5,"div",5),b.Ub(6,"mat-card"),b.Ub(7,"form",6),b.Ub(8,"mat-form-field",7),b.Ub(9,"input",8,9),b.cc("ngModelChange",(function(t){return e.search=t}))("keyup",(function(){return e.onSearch()})),b.Tb(),b.Tb(),b.Ub(11,"mat-icon",10),b.Ic(12,"search"),b.Tb(),b.Ub(13,"button",11),b.cc("click",(function(){return e.openDialog(0,"create")})),b.Ic(14,"+ Ticket"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Pb(15,"br"),b.Ub(16,"div",0),b.Ub(17,"table",12),b.Sb(18,13),b.Gc(19,Fe,2,0,"th",14),b.Gc(20,De,2,2,"td",15),b.Rb(),b.Sb(21,16),b.Gc(22,Ge,2,0,"th",17),b.Gc(23,Le,4,8,"td",15),b.Rb(),b.Sb(24,18),b.Gc(25,Ae,2,0,"th",17),b.Gc(26,Be,7,2,"td",19),b.Rb(),b.Sb(27,20),b.Gc(28,Ee,2,0,"th",21),b.Gc(29,Ve,7,2,"td",22),b.Rb(),b.Gc(30,qe,1,0,"tr",23),b.Gc(31,Je,1,0,"tr",24),b.Tb(),b.Tb(),b.Pb(32,"br"),b.Pb(33,"br"),b.Ub(34,"div",0),b.Gc(35,Ke,1,0,"mat-progress-spinner",25),b.Gc(36,Ye,2,0,"p",26),b.Gc(37,He,1,3,"mat-paginator",27),b.Tb()),2&t&&(b.Cb(4),b.oc("ngIf",e.tickets.length>0),b.Cb(5),b.oc("ngModel",e.search),b.Cb(8),b.oc("dataSource",e.tickets),b.Cb(13),b.oc("matHeaderRowDef",e.displayedColumns1),b.Cb(1),b.oc("matRowDefColumns",e.displayedColumns1),b.Cb(4),b.oc("ngIf",e.isLoading),b.Cb(1),b.oc("ngIf",e.tickets.length<=0&&!e.isLoading),b.Cb(1),b.oc("ngIf",e.tickets.length>0))},directives:[i.l,V.a,o.v,o.n,o.o,_.b,k.b,o.b,o.m,o.p,U.a,je.j,je.c,je.e,je.b,je.g,je.i,Se.a,je.d,je.a,q.a,_.f,ct.a,i.k,P.n,je.f,je.h,J.a,K.a],pipes:[i.e],styles:[".mat-card[_ngcontent-%COMP%]{-webkit-transition:box-shadow .28s cubic-bezier(.4,0,.2,1);transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:70px}.btn.focus[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #fff}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #fafafa}.mat-input-element[_ngcontent-%COMP%]:focus{font:inherit;color:#f89b46;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.btn-success[_ngcontent-%COMP%]{color:#f89b46;background-color:#fff;border-color:#f89b46}table[_ngcontent-%COMP%]{table-layout:fixed}mat-paginator[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:98%}mat-icon[_ngcontent-%COMP%]{margin:5px}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success.focus[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:focus{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important;box-shadow:#f89b46!important}.example-card[_ngcontent-%COMP%]{width:100%;margin:15px}.example-card[_ngcontent-%COMP%]:hover{width:100%;background-color:#a09d9d}.example-header-image[_ngcontent-%COMP%]{background-image:url(/assets/proj.jpg);background-size:cover}mat-card-subtitle[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{white-space:nowrap;width:105px;overflow:hidden;text-overflow:ellipsis}.example-tooltip-red[_ngcontent-%COMP%]{background:#b71c1c!important}.mat-card[_ngcontent-%COMP%]{background:#fff;width:100%;color:#f89b46;height:90px;min-width:100%}.status_cus[_ngcontent-%COMP%]{height:55px;width:98%}.mat-form-field-type-mat-select[_ngcontent-%COMP%]:not(.mat-form-field-disabled)   .mat-form-field-flex[_ngcontent-%COMP%]{cursor:pointer!important;height:50px!important}"]}),t})()},{path:"",redirectTo:"projects",pathMatch:"full"}];let Qe=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[c.f.forChild(We)],c.f]}),t})();n.d(e,"SharedModule",(function(){return Xe}));let Xe=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[i.c,o.g,Se.b,o.s,a.a,Qe]]}),t})()}}]);